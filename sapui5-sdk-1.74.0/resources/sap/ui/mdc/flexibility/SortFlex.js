/*
 * ! SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/fl/apply/api/FlexRuntimeInfoAPI"],function(F){"use strict";var r=function(c){var e=c&&c.isA&&c.isA("sap.ui.mdc.Table")&&c.isTableBound();var E=c&&c.isA&&c.isA("sap.ui.mdc.Chart");if(e||E){if(!c._bWaitForBindChanges){c._bWaitForBindChanges=true;F.waitForChanges({element:c}).then(function(){if(e){c.rebindTable();}else if(E){c._rebind();}delete c._bWaitForBindChanges;});}}};var p=function(v){var V=[];if(!v){return V;}Object.keys(v).forEach(function(n){V.push({name:n,descending:v[n].descending});});return V;};var P=function(v){var V=v.reduce(function(b,o){b[o.name]={descending:o.descending};return b;},{});return V||{};};var f=function(c,C,s,i){if(i){c.resetRevertData();}else{c.setRevertData({sortContent:s});}r(C);};var a=function(c,C,b,i){return new Promise(function(d,e){var M=b.modifier;var o=i?c.getRevertData():c.getContent();var v=M.getProperty(C,"sortConditions");var V=p(v);var s={name:o.name,descending:o.descending};V.splice(o.index,0,s);v=P(V);M.setProperty(C,"sortConditions",v);f(c,C,s,i);d();});};var R=function(c,C,b,i){return new Promise(function(d,e){var M=b.modifier;var g=i?c.getRevertData():c.getContent();var v=M.getProperty(C,"sortConditions");var V=p(v);if(!V){e();}var h=V.filter(function(o){return o.name===g.name;});var I=V.indexOf(h[0]);V.splice(I,1);v=P(V);if(Object.keys(v).length===0&&v.constructor===Object){v=null;}M.setProperty(C,"sortConditions",v);f(c,C,g,i);d();});};var m=function(c,C,b,i){return new Promise(function(d,e){var M=b.modifier;var g=i?c.getRevertData():c.getContent();var v=M.getProperty(C,"sortConditions");var V=p(v);var h=V.filter(function(o){return o.name===g.name;});var O=V.indexOf(h[0]);V.splice(g.index,0,V.splice(O,1)[0]);v=P(V);M.setProperty(C,"sortConditions",v);f(c,C,g,i);d();});};var S={};S.removeSort={"changeHandler":{applyChange:function(c,C,b){return R(c,C,b,false);},completeChangeContent:function(c,C,b){},revertChange:function(c,C,b){return a(c,C,b,true);}},"layers":{"USER":true}};S.addSort={"changeHandler":{applyChange:function(c,C,b){return a(c,C,b,false);},completeChangeContent:function(c,C,b){},revertChange:function(c,C,b){return R(c,C,b,true);}},"layers":{"USER":true}};S.moveSort={"changeHandler":{applyChange:function(c,C,b){return m(c,C,b);},completeChangeContent:function(c,C,b){},revertChange:function(c,C,b){return m(c,C,b,true);}},"layers":{"USER":true}};return S;});
