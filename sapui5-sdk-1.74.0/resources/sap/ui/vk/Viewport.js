/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/base/util/ObjectPath","./ViewportBase","./ContentConnector","./ViewStateManager","./ViewportRenderer","./VisibilityMode","./RenderMode","./Scene","./Camera"],function(q,O,V,C,a,b,c,R,S,d){"use strict";var e=V.extend("sap.ui.vk.Viewport",{metadata:{library:"sap.ui.vk",designtime:"sap/ui/vk/designtime/Viewport.designtime"}});var f=e.getMetadata().getParent().getClass().prototype;e.prototype.init=function(){if(f.init){f.init.call(this);}this._implementation=null;};e.prototype.exit=function(){this._destroyImplementation();if(f.exit){f.exit.call(this);}};e.prototype.getImplementation=function(){return this._implementation;};e.prototype._destroyImplementation=function(){if(this._implementation){this._implementation.destroy();this._implementation=null;}return this;};e.prototype.getShowDebugInfo=function(){if(this._implementation){return this._implementation.getShowDebugInfo();}return f.getShowDebugInfo.call(this);};e.prototype.setShowDebugInfo=function(v){f.setShowDebugInfo.call(this,v);if(this._implementation){this._implementation.setShowDebugInfo(v);}return this;};e.prototype.getBackgroundColorTop=function(){if(this._implementation){return this._implementation.getBackgroundColorTop();}return f.getBackgroundColorTop.call(this);};e.prototype.setBackgroundColorTop=function(v){f.setBackgroundColorTop.call(this,v);if(this._implementation){this._implementation.setBackgroundColorTop(v);}return this;};e.prototype.getBackgroundColorBottom=function(){if(this._implementation){return this._implementation.getBackgroundColorBottom();}return f.getBackgroundColorBottom.call(this);};e.prototype.setBackgroundColorBottom=function(v){f.setBackgroundColorBottom.call(this,v);if(this._implementation){this._implementation.setBackgroundColorBottom(v);}return this;};e.prototype.setWidth=function(v){f.setWidth.call(this,v);if(this._implementation){this._implementation.setWidth(v);}return this;};e.prototype.setHeight=function(v){f.setHeight.call(this,v);if(this._implementation){this._implementation.setHeight(v);}return this;};e.prototype.setSelectionMode=function(v){f.setSelectionMode.call(this,v);if(this._implementation){this._implementation.setSelectionMode(v);}return this;};e.prototype.getSelectionMode=function(){if(this._implementation){return this._implementation.getSelectionMode();}return f.getSelectionMode.call(this);};e.prototype.setSelectionDisplayMode=function(v){f.setSelectionDisplayMode.call(this,v);if(this._implementation){this._implementation.setSelectionDisplayMode(v);}return this;};e.prototype.getSelectionDisplayMode=function(){if(this._implementation){return this._implementation.getSelectionDisplayMode();}return f.getSelectionDisplayMode.call(this);};e.prototype.setCamera=function(v){f.setCamera.call(this,v);if(this._implementation){this._implementation.setCamera(v);return this;}return this;};e.prototype.getCamera=function(){if(this._implementation){return this._implementation.getCamera();}return f.getCamera.call(this);};e.prototype.setShouldRenderFrame=function(){if(this._implementation){this._implementation.setShouldRenderFrame();}return this;};e.prototype.shouldRenderFrame=function(){if(this._implementation){this._implementation.shouldRenderFrame();}};e.prototype.setRenderMode=function(v){if(this._implementation&&this._implementation.setRenderMode){this._implementation.setRenderMode(v);}return this;};e.prototype.getRenderMode=function(){if(this._implementation&&this._implementation.getRenderMode){return this._implementation.getRenderMode();}return R.Default;};e.prototype.setFreezeCamera=function(v){f.setFreezeCamera.call(this,v);if(this._implementation){this._implementation.setFreezeCamera(v);}return this;};e.prototype.showHotspots=function(n,l,m){if(this._implementation&&this._implementation.showHotspots){this._implementation.showHotspots(n,l,m);}return this;};e.prototype.addTool=function(t){this.addAssociation("tools",t);if(this._implementation){this._implementation.addTool(t);}};e.prototype.removeTool=function(t){this.removeAssociation("tools",t);if(this._implementation){this._implementation.removeTool(t);}};e.prototype.getTools=function(){if(this._implementation){return this._implementation.getTools();}return this.getAssociation("tools",[]);};e.prototype.removeAllTools=function(){this.removeAllAssociation("tools");if(this._implementation){this._implementation.removeAllTools();}};e.prototype.addContent=function(l){if(this._implementation){this._implementation.addContent(l);}else{this.addAggregation("content",l);}};e.prototype.removeContent=function(l){if(this._implementation){this._implementation.removeContent(l);}else{this.removeAggregation("content",l);}};e.prototype.getContent=function(){if(this._implementation){return this._implementation.getContent();}return this.getAggregation("content");};e.prototype.removeAllContent=function(){if(this._implementation){this._implementation.removeAllContent();}else{this.removeAggregation("content");}};e.prototype.startAnimation=function(p){if(this._implementation&&this._implementation.startAnimation){this._implementation.startAnimation(p);}};e.prototype.stopAnimation=function(){if(this._implementation&&this._implementation.stopAnimation){this._implementation.stopAnimation();}};e.prototype.playProcedure=function(m,v,n){if(this._implementation&&this._implementation.playProcedure){this._implementation.playProcedure(m,v,n);}};e.prototype.getCurrentView=function(){if(this._implementation&&this._implementation.getCurrentView){return this._implementation.getCurrentView();}return null;};e.prototype.pan=function(l,m){if(this._implementation&&this._implementation.pan){this._implementation.pan(l,m);}};e.prototype.rotate=function(l,m){if(this._implementation&&this._implementation.rotate){this._implementation.rotate(l,m);}};e.prototype.zoom=function(l){if(this._implementation&&this._implementation.zoom){this._implementation.zoom(l);}};e.prototype.pauseAnimation=function(){if(this._implementation&&this._implementation.pauseAnimation){return this._implementation.pauseAnimation();}};e.prototype.resumeAnimation=function(){if(this._implementation&&this._implementation.resumeAnimation){return this._implementation.resumeAnimation();}};e.prototype.handleDragAnimation=function(l){if(this._implementation&&this._implementation.handleDragAnimation){this._implementation.handleDragAnimation(l);}};e.prototype.handleCompleteDraggingAnimation=function(l){if(this._implementation&&this._implementation.handleCompleteDraggingAnimation){this._implementation.handleCompleteDraggingAnimation(l);}};e.prototype.AddHandlersToAnimationSequenceEvents=function(l){if(this._implementation&&this._implementation.AddHandlersToAnimationSequenceEvents){this._implementation.AddHandlersToAnimationSequenceEvents(l);}};e.prototype._setContent=function(l){var m=null;var n=null;if(l){m=l;if(!(m instanceof S)){m=null;}n=l.camera;if(!(n instanceof d)){n=null;}}this._setScene(m);if(n){this.setCamera(n);}};e.prototype._onAfterUpdateContentConnector=function(){this._setContent(this._contentConnector.getContent());};e.prototype._onBeforeClearContentConnector=function(){if(f._onBeforeClearContentConnector){f._onBeforeClearContentConnector.call(this);}this._setScene(null);};e.prototype._handleContentReplaced=function(l){var m=l.getParameter("newContent");this._setContent(m);};e.prototype._setScene=function(l){if(l instanceof S){var m=l.getMetadata().getName(),n=this._implementation&&this._implementation.getMetadata().getName(),r=m==="sap.ui.vk.dvl.Scene"&&n==="sap.ui.vk.dvl.Viewport"||m==="sap.ui.vk.threejs.Scene"&&n==="sap.ui.vk.threejs.Viewport";if(!r){this._destroyImplementation();var o;var p=this.getCamera();if(m==="sap.ui.vk.dvl.Scene"){o="sap.ui.vk.dvl.Viewport";}else if(m==="sap.ui.vk.threejs.Scene"){o="sap.ui.vk.threejs.Viewport";}if(o){var t=O.get(o);this._implementation=new t({viewStateManager:this.getViewStateManager(),tools:this.getAssociation("tools"),content:this.getContent(),showDebugInfo:this.getShowDebugInfo(),width:this.getWidth(),height:this.getHeight(),backgroundColorTop:this.getBackgroundColorTop(),backgroundColorBottom:this.getBackgroundColorBottom(),selectionMode:this.getSelectionMode(),freezeCamera:this.getFreezeCamera(),contentConnector:this.getContentConnector()});if(p){this._camera=null;this._implementation.setCamera(p);}this._implementation.setParent(this);}this.invalidate();}}else{this._destroyImplementation();this.invalidate();}return this;};e.prototype._onAfterUpdateViewStateManager=function(){if(this._implementation){this._implementation.setViewStateManager(this._viewStateManager);}};e.prototype._onBeforeClearViewStateManager=function(){if(this._implementation){this._implementation.setViewStateManager(null);}};e.prototype.activateView=function(v,p,n){if(this._implementation){this._implementation.activateView(v,p,n);return this;}else{q.sap.log.error("no implementation");return this;}};e.prototype.resetCurrentView=function(){if(this._implementation&&this._implementation.resetCurrentView){this._implementation.resetCurrentView();return this;}else{q.sap.log.error("no implementation");return this;}};e.prototype.zoomTo=function(w,n,l,m){if(this._implementation){this._implementation.zoomTo(w,n,l,m);}else{q.sap.log.error("zoomTo: no implementation");}return this;};e.prototype.tap=function(x,y,l){if(this._implementation){this._implementation.tap(x,y,l);}return this;};var s=function(l){l.camera={};};var g=function(l){if(typeof l.camera==="object"&&l.camera!==null){l.camera.matrices=false;}};var h=function(l){if(typeof l.camera==="object"&&l.camera!==null){l.camera.useTransitionCamera=false;}};var i=function(l){l.animation=true;};var j=function(l){l.visibility=false;};var k=function(l){if(typeof l.visibility==="object"&&l.visibility!==null){l.visibility.mode=c.Complete;}};e.prototype.getViewInfo=function(l){if(!this._implementation){q.sap.log.error("no implementation");return null;}var m={};if(typeof l!=="object"||l===null){s(m);g(m);h(m);i(m);j(m);k(m);}else{if(typeof l.camera==="object"&&l.camera!==null){m.camera={};if(typeof l.camera.matrices==="boolean"){m.camera.matrices=l.camera.matrices;}else if("matrices"in l.camera){m.camera.matrices=false;}else{g(m);}if(typeof l.camera.useTransitionCamera==="boolean"){m.camera.useTransitionCamera=l.camera.useTransitionCamera;}else if("useTransitionCamera"in l.camera){m.camera.useTransitionCamera=false;}else{h(m);}}else if(typeof l.camera==="boolean"){if(l.camera===true){m.camera={};g(m);h(m);}else{m.camera=false;}}else if("camera"in l){m.camera=false;}else{s(m);g(m);h(m);}if(typeof l.animation==="boolean"){m.animation=l.animation;}else if("animation"in l){m.animation=false;}else{i(m);}if(typeof l.visibility==="object"&&l.visibility!==null){m.visibility={};if(l.visibility.mode===c.Complete||l.visibility.mode===c.Differences){m.visibility.mode=l.visibility.mode;}else{k(m);}}else if(typeof l.visibility==="boolean"){if(l.visibility===true){m.visibility={};k(m);}else{m.visibility=false;}}else if("visibility"in l){m.visibility=false;}else{j(m);k(m);}}return this._implementation.getViewInfo(m);};e.prototype.setViewInfo=function(v,l){if(this._implementation){this._implementation.setViewInfo(v,l);}else{q.sap.log.error("no implementation");}return this;};e.prototype.updateNodeInfoInCurrentView=function(n,o){if(this._implementation&&this._implementation.updateNodeInfoInCurrentView){this._implementation.updateNodeInfoInCurrentView(n,o);}else{q.sap.log.error("no implementation");}};e.prototype.getImage=function(w,l,t,m,n){if(this._implementation&&this._implementation.getImage){return this._implementation.getImage(w,l,t,m,n);}return null;};C.injectMethodsIntoClass(e);a.injectMethodsIntoClass(e);return e;});
