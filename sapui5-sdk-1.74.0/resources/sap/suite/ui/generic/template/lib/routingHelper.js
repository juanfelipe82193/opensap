sap.ui.define(["sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/generic/app/util/ModelUtil","sap/suite/ui/generic/template/lib/CRUDHelper","sap/suite/ui/generic/template/lib/FlexibleColumnLayoutHandler","sap/suite/ui/generic/template/lib/testableHelper","sap/suite/ui/generic/template/js/StableIdHelper","sap/m/MessageBox","sap/base/Log","sap/ui/model/analytics/odata4analytics","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/each"],function(F,a,M,C,b,t,S,c,L,o,e,d,f){"use strict";var p="---";function g(i,j,Z,$,_){var a1={};a1={viewName:Z,controlId:j,controlAggregation:_};var b1=i.getTargets();b1.addTarget($,a1);}function h(i,j){if(i.oTemplateContract.oFlexibleColumnLayoutHandler){i.oTemplateContract.oFlexibleColumnLayoutHandler.createMessagePageTargets(g.bind(null,i.oRouter,j,"sap.suite.ui.generic.template.fragments.MessagePage"));}else{g(i.oRouter,j,"sap.suite.ui.generic.template.fragments.MessagePage","messagePage","pages");}}function E(i,j,Z){var $=i[j];if(!$){$={draftSpec:"OData",level:0,children:[]};for(var _ in i){var a1=i[_];if(a1.level===1){$.children.push(_);break;}}i[j]=$;}if($.hasOwnProperty("isDraft")){return;}if($.draftSpec==="parent"){if($.parent){E(i,$.parent,Z);var b1=i[$.parent];$.isDraft=b1.isDraft;}else if($.level===1){for(var c1 in i){var d1=i[c1];if(d1.level===0){$.isDraft=d1.isDraft;return;}}}return;}if($.draftSpec==="OData"){var e1=Z.getDraftContext();$.isDraft=e1.isDraftEnabled(j);return;}$.isDraft=$.draftSpec;}function k(i,j){var Z=i.oAppComponent.getModel();var $=Z.getMetaModel();$.loaded().then(function(){var _=i.oTemplateContract.mEntityTree;var a1=i.oAppComponent.getTransactionController().getDraftController();E(_,j.entitySet,a1);for(var b1 in _){E(_,b1,a1);}});}function l(i){var j=i.oTemplateContract.oNavigationHost.getId();var Z=i.oAppComponent.getConfig();if(!Z.pages||!Z.pages.length){throw new Error("Route Configuration missing");}if(Z.pages.length>1){throw new Error("Currently only one Top route supported");}var $=Z.pages[0];i.oTemplateContract.mEntityTree=Object.create(null);i.oTemplateContract.mRoutingTree=Object.create(null);var _={sRouteName:"root",page:$,pattern:"",contextPath:"",level:0,fCLLevel:0,children:[],headerTitle:i.oAppComponent.getManifestEntry("sap.app").title,text:""};var a1=y([],$,"root",_,null,i,j);i.oRouter.addRoute(a1);i.oTemplateContract.mRoutingTree.root=_;s(a1,i);m("root",$,0,null,_,i,j,_.children);h(i,j);k(i,a1);return $.entitySet;}function m(j,Z,$,_,a1,b1,c1,d1,e1,f1){var i,g1;if(Z.pages){g1=Z.pages.length;for(i=0;i<g1;i++){r(j,Z.pages[i],($+1),_,a1,b1,c1,d1,e1,f1||0);}}}function H(i,j,Z,$,_,a1,b1,c1,d1){var e1=$.target;var f1={pages:j.pages};var g1={pattern:$.pattern+"/"+i,entitySet:$.entitySet,name:$.name,contextPath:$.contextPath,patternDelimiter:p,embeddedComponent:i};var h1={pattern:$.pattern+"/"+i,patternDelimiter:p,contextPath:$.contextPath};m(e1,f1,Z,g1,h1,_,a1,b1,c1,d1);}function n(i,j,Z,$,_,a1,b1,c1,d1,e1,f1){var g1={};var h1={key:b1,definition:c1,componentName:c1.componentName,componentUsage:c1.componentUsage,hiddenByDefault:c1.hiddenByDefault,containerId:d1,sectionId:e1,subSectionId:f1,pages:c1.pages||[],children:[],communicationObject:g1};i.embeddedComponents[b1]=h1;if(c1.pages){H(b1,c1,j,Z,$,_,h1.children,g1,a1);}}function q(j,Z,$,_,a1,b1,c1){j.embeddedComponents=Object.create(null);j.leadingComponents=Object.create(null);j.facetsWithEmbeddedComponents=Object.create(null);if(Z.implementingComponent){n(j,$,_,a1,b1,c1,"implementation",Z.implementingComponent,"template::ImplementingComponent");}else if(Z.embeddedComponents){var d1=Object.create(null);var e1=Object.create(null);var f1;var g1;var h1;for(f1 in Z.embeddedComponents){g1=Z.embeddedComponents[f1];if(!g1.leadingSectionIdOrPath||g1.leadingSectionIdOrPath===f1){d1[f1]=[f1];}else if(Z.embeddedComponents[g1.leadingSectionIdOrPath]){e1[f1]=g1.leadingSectionIdOrPath;}else{h1=j.facetsWithEmbeddedComponents[g1.leadingSectionIdOrPath];if(h1){h1.push(f1);}else{j.facetsWithEmbeddedComponents[g1.leadingSectionIdOrPath]=[f1];}}}var i1=[];for(f1 in e1){var j1=e1[f1];h1=d1[j1];if(h1){h1.push(f1);}else{i1.push(f1);delete e1[f1];}}for(var i=0;i<i1.length;i++){d1[i1[i]]=[i1[i]];}for(f1 in Z.embeddedComponents){g1=Z.embeddedComponents[f1];var k1=d1[f1]&&S.getStableId({type:"ObjectPageSection",subType:"ReuseComponentSection",sReuseComponentName:g1.componentName,sReuseComponentUsage:g1.componentUsage,sReuseComponentId:f1});var l1=S.getStableId({type:"ObjectPageSection",subType:"ReuseComponentSubSection",sReuseComponentName:g1.componentName,sReuseComponentUsage:g1.componentUsage,sReuseComponentId:f1});var m1=S.getStableId({type:"ObjectPageSection",subType:"ReuseComponentContainer",sReuseComponentName:g1.componentName,sReuseComponentUsage:g1.componentUsage,sReuseComponentId:f1});n(j,$,_,a1,b1,c1,f1,g1,m1,k1,l1);}Object.keys(d1).forEach(function(j1){var n1=j.embeddedComponents[j1];j.leadingComponents[j1]={sectionId:n1.sectionId,title:n1.definition.groupTitle||n1.definition.title,followingComponents:d1[j1].map(function(o1){var p1=j.embeddedComponents[o1];p1.sectionId=n1.sectionId;return p1;})};});}}function r(i,j,Z,$,_,a1,b1,c1,d1,e1){if(j.component){var f1=a1.oTemplateContract.oFlexibleColumnLayoutHandler?a1.oTemplateContract.oFlexibleColumnLayoutHandler.getMaxColumnCountInFCL():1;var g1=(f1===1)||(j.defaultLayoutType==="OneColumn")?0:e1+1;var h1={parent:$&&$.entitySet,parentRoute:$?$.name:"root",parentEmbeddedComponent:$&&$.embeddedComponent,entitySet:j.entitySet,navigationProperty:j.navigationProperty,level:Z,fCLLevel:g1>=f1?3:g1,children:[],communicationObject:d1,page:j,defaultLayoutType:j.defaultLayoutType,noKey:j.routingSpec&&j.routingSpec.noKey,noOData:j.routingSpec&&j.routingSpec.noOData,draftSpec:j.routingSpec?j.routingSpec.draftSpec||"parent":"OData",text:""};v(h1,_);if(h1.noOData){x(h1,_);}else{w(h1,a1);}var i1=y(i,j,j.component.list?"aggregation":"detail",h1,$,a1,b1);h1.sRouteName=i1.name;if(c1){c1.push(i1.entitySet);}a1.oTemplateContract.mRoutingTree[i1.name]=h1;var j1=a1.oTemplateContract.mEntityTree[i1.entitySet];if(!j1||j1.level>h1.level){a1.oTemplateContract.mEntityTree[i1.entitySet]=h1;}a1.oRouter.addRoute(i1);s(i1,a1);u(a1,h1,j);m(i1.target,j,Z,i1,h1,a1,b1,h1.children,d1,g1);q(h1,j,Z,i1,a1,b1,g1);}}function s(i,j){var Z=e({},i);Z.name=i.name+"query";Z.pattern=i.pattern+"{?query}";j.oRouter.addRoute(Z);}function u(i,j,Z){if(j.noOData){j.headerTitle=Z.routingSpec.headerTitle;j.titleIconUrl=Z.routingSpec.titleIconUrl;}else{var $=i.oAppComponent.getModel();var _=$.getMetaModel();_.loaded().then(function(){var a1=_.getODataEntitySet(j.entitySet);var b1=_.getODataEntityType(a1.entityType);var c1=b1["com.sap.vocabularies.UI.v1.HeaderInfo"];var d1=(c1&&c1.TypeName&&c1.TypeName.String)||"";if(d1.substr(0,7)==="{@i18n>"){var e1=d1.substring(1,d1.length-1);var f1=e1.split(">");d1=i.oAppComponent.getModel(f1[0]).getResourceBundle().getText(f1[1]);}j.headerTitle=d1;var g1=(c1&&c1.Title&&c1.Title.IconUrl&&c1.Title.IconUrl.String)||"";j.titleIconUrl=g1;});}}function v(i,j){if(i.level===0){i.pattern="";return;}var Z=(i.level===1)?i.page.entitySet:i.page.navigationProperty;var $=i.noKey?"":"({keys"+i.level+"})";i.pattern=Z+$;if(j&&j.pattern){i.pattern=j.pattern+(j.patternDelimiter||"/")+i.pattern;}}function w(i,j){if(j.oTemplateContract.bCreateRequestsCanonical){i.contextPath="/"+i.entitySet+"({keys"+i.level+"})";}else{i.contextPath="/"+i.pattern;}}function x(i,j){i.contextPath=j.contextPath+(i.page.routingSpec.binding?("/"+i.page.routingSpec.binding):"");}function y(i,j,Z,$,_,a1,b1){var c1=$.level;var d1=Array.isArray(i)?i:[i];var e1,f1;e1=(c1===1)?j.entitySet:j.navigationProperty;f1=e({},j);f1.path="/"+j.entitySet;f1.operation=Z;f1.viewLevel=c1;f1.template=j.component?(j.component.name||j.component):j.template;switch(Z){case"root":f1.name="root";break;case"aggregation":f1.name=e1+"~aggregation";break;default:f1.name=e1;break;}if(_){f1.name=_.name+"/"+(_.embeddedComponent?_.embeddedComponent+"/":"")+f1.name;f1.parentEntitySet=_.entitySet;}var g1;var h1=f1.name;if(a1.oTemplateContract.oFlexibleColumnLayoutHandler){g1=a1.oTemplateContract.oFlexibleColumnLayoutHandler.adaptRoutingInfo(f1,h1,d1,$);}else{g1="pages";f1.target=h1;}g(a1.oRouter,b1,f1.name,h1,g1);var i1=new Promise(function(j1){a1.mRouteToComponentResolve[f1.name]=j1;});a1.oTemplateContract.mRouteToTemplateComponentPromise[f1.name]=i1;f1.pattern=$.pattern;f1.contextPath=$.contextPath;return f1;}function I(i,j){var Z;if(!i.oHashChanger.getHash()){Z="";if(j&&j.route&&j.route.length===1){Z=j.route[0];i.navigate(Z,true);}}i.oRouter.initialize();i.fnInitializationResolve();}function B(j,Z,$,_){var i,a1,b1,c1,d1=[],e1;a1=$.length;for(i=0;i<a1;i++){b1=$[i].PropertyPath;c1=_[b1][0];d1.push(new F(b1,a.EQ,c1));}if(j.oAppComponent.getTransactionController().getDraftController().getDraftContext().isDraftEnabled(Z)){var f1=new F({filters:[new F("IsActiveEntity","EQ",false),new F("SiblingEntity/IsActiveEntity","EQ",null)],and:false});d1.push(f1);}e1=new F(d1,true);return e1;}function R(j,Z,$){var _="/"+Z;try{var a1=new o.Model(o.Model.ReferenceByModel(j));var b1=a1.findQueryResultByName(Z);var c1=new o.QueryResultRequest(b1);var d1=b1&&b1.getParameterization();var e1=false;if(d1){c1.setParameterizationRequest(new o.ParameterizationRequest(d1));var f1=d1.getAllParameterNames();f(f1,function(){if($.hasOwnProperty(this)){e1=true;c1.getParameterizationRequest().setParameterValue(this,$[this][0]);}});for(var i=0;i<f1.length;i++){if(f1[i].startsWith("P_")){var g1=f1[i].substr(2);if($.hasOwnProperty(g1)){e1=true;c1.getParameterizationRequest().setParameterValue(f1[i],$[g1][0]);}}}if(e1){_=c1.getURIToQueryResultEntitySet();}}}catch(h1){L.info(h1.name+":"+h1.message);}return _;}function z(i,j,Z,$,_){return new Promise(function(a1,b1){var c1=R(Z,i,$);Z.read(c1,{filters:[j],success:function(d1){var e1=D(d1,Z,$);if(e1){var f1=Z.getKey(e1);if(f1){a1({"status":"success","value":f1,"iLevel":_});}}a1({"status":"noData"});},error:function(){a1({"status":"error"});}});});}function A(j,Z,$,_,a1,b1,c1){var d1=[],e1,f1,g1;var h1=new Promise(function(i1){i1({"status":"success","value":c1,"iLevel":0});});if($&&_&&a1){if(b1.aNavigablePages){for(var i=0;i<b1.aNavigablePages.length;i++){if(b1.aNavigablePages&&b1.aNavigablePages[i]&&b1.aNavigablePages[i].bNavigationWithTechnicalKeyPossible){d1.push(h1);continue;}e1=b1.aNavigablePages[i];f1=B(j,e1.sEntitySet,e1.aSemanticKey,_);g1=z(e1.sEntitySet,f1,a1,_,e1.iLevel);d1.push(g1);}}return Promise.all(d1).then(function(i1){if(i1[0]&&i1[0].status&&i1[0].status==="success"){var i,j1="",k1;for(i=0;i<i1.length;i++){if(i1[i]&&i1[i].status&&i1[i].status==="success"){k1=i1[i].value;if(i>0){k1=k1.replace(b1.aNavigablePages[i].sEntitySet,b1.aNavigablePages[i].sNavigationProperty);k1='/'+k1;}j1=j1.concat(k1);continue;}else{break;}}j.navigate(j1,true);}I(j,_);});}}function D(Z,$,_){var a1,i,b1,c1;if(Z&&Z.results){b1=Z.results.length;if(b1===0){c1=null;}else if(b1===1){c1=Z.results[0];}else if(b1>=1){var d1=[];var e1=[];for(i=0;i<b1;i++){a1=Z.results[i];if(a1&&a1.IsActiveEntity){e1.push(a1);}else if(a1&&a1.IsActiveEntity===false){d1.push(a1);}}if(e1.length===0&&d1.length>=2){var f1;for(var j=0;j<d1.length;j++){f1=d1[j];if(f1.DraftUUID===(_.DraftUUID&&_.DraftUUID[0])){c1=f1;break;}}if(!c1){c1=d1[0];}}else if(e1.length===1&&d1.length>=1){c1=e1[0];}}}return c1;}function G(i,j){if((i&&j)||(j==="display")){return{mode:"unsupported"};}var Z={mode:"display",force:"false"};Z.mode=j||i||Z.mode;Z.force=!!j;return Z;}function J(j,Z,$,_,a1){var b1=e({},_);V(j.getMetaModel(),$,b1);var c1=O(j,Z,$,b1,a1);if(c1.aNavigablePages&&c1.aNavigablePages[0]&&c1.aNavigablePages[0].aSemanticKey&&c1.aNavigablePages[0].iLevel===0){A(Z,$,c1.aNavigablePages[0].aSemanticKey,b1,j,c1);return;}else if(c1.aNavigablePages&&c1.aNavigablePages[0]&&c1.aNavigablePages[0].bNavigationWithTechnicalKeyPossible){if(_.IsActiveEntity&&_.IsActiveEntity[0]==="false"&&_.DraftUUID&&_.DraftUUID[0]!==""){var d1=[];for(var i=0;i<c1.aNavigablePages[0].aTechnicalKey.length;i++){var e1=c1.aNavigablePages[0].aTechnicalKey[i]&&c1.aNavigablePages[0].aTechnicalKey[i].name;if(e1==="DraftUUID"||e1==="IsActiveEntity"){continue;}if(b1.hasOwnProperty(e1)){d1.push({PropertyPath:e1});}}var f1=j.createKey($,b1);A(Z,$,d1,b1,j,c1,f1);return;}var f1=j.createKey($,b1);if(f1){if(c1){var d1=[];for(var i=0;i<c1.aNavigablePages[0].aTechnicalKey.length;i++){var e1=c1.aNavigablePages[0].aTechnicalKey[i]&&c1.aNavigablePages[0].aTechnicalKey[i].name;if(e1==="DraftUUID"||e1==="IsActiveEntity"){continue;}if(b1.hasOwnProperty(e1)){d1.push({PropertyPath:e1});}}A(Z,$,d1,b1,j,c1,f1);return;}Z.navigate(f1,true);}}I(Z,_);}function K(j,Z){var i,$,_=false,a1,b1;if(Z&&j){$=j.length;for(i=0;i<$;i++){_=true;a1=j[i];b1=a1.name||a1.PropertyPath;if(!Z[b1]||Z[b1].length>1){_=false;break;}}}return _;}function N(j,Z,$,_,a1,b1){var c1,d1,e1,f1,g1,h1,i1;for(var i=0;i<_.length;i++){h1=_[i];if(h1&&h1.navigation&&h1.navigation[$.mode]){continue;}d1=j.getMetaModel().getODataEntitySet(h1.entitySet);e1=h1.component&&h1.component.settings&&h1.component.settings.allowDeepLinking;if(!d1||!(a1===0||e1)){continue;}f1=j.getMetaModel().getODataEntityType(d1.entityType);g1=f1["com.sap.vocabularies.Common.v1.SemanticKey"];c1={};i1={};if(g1&&K(g1,Z)){c1["sEntitySet"]=h1.entitySet;c1["aSemanticKey"]=g1;c1["sNavigationProperty"]=h1.navigationProperty;c1["iLevel"]=a1;b1.push(c1);}else{if(f1.key.propertyRef&&(a1===0)&&K(f1.key.propertyRef,Z)){i1.bNavigationWithTechnicalKeyPossible=K(f1.key.propertyRef,Z);i1.aTechnicalKey=f1.key.propertyRef;b1.push(i1);}}if(h1.pages){N(j,Z,$,h1.pages,++a1,b1);}else{break;}}return b1;}function O(i,j,Z,$,_){var a1={},b1=[],c1=[];var d1=j.oAppComponent.getConfig();b1=d1.pages&&d1.pages[0]&&d1.pages[0].pages;if(!b1){return{};}c1=N(i,$,_,b1,0,c1);a1.aNavigablePages=c1;return a1;}function P(i){var j=i.oAppComponent.getModel("_templPrivGlobal");j.setProperty("/generic/forceFullscreenCreate",true);}function T(Z,$,_){var a1,b1,c1,d1,e1,f1,i,g1,j,h1,i1;if(d(_)){return;}a1=Z&&Z.getMetaModel();b1=a1&&a1.getODataEntitySet($);c1=b1&&b1.entityType;d1=a1&&a1.getODataEntityType(c1);e1=d1&&d1.property;f1=[];i1=e1&&e1.length;for(i=0;i<i1;i++){g1=e1[i];if(g1["type"]==="Edm.Guid"){f1.push(g1["name"]);}}for(j=0;j<f1.length;j++){if(!_[f1[j]]){continue;}h1=_[f1[j]][0];h1=h1.toLowerCase().replace(/(guid')([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})(')/,"$2");if(!h1.match(/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/)){h1=h1.replace(/([0-9a-f]{8})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{4})([0-9a-f]{12})/,"$1-$2-$3-$4-$5");}_[f1[j]][0]=h1;}}function Q(i){var j=i.oAppComponent.getInboundParameters();return j?Object.keys(j).filter(function(Z){return j[Z].useForCreate;}):[];}function U(j,Z){var $;var _=Q(j);for(var i=0;i<_.length;i++){var a1=_[i];var b1=Z[a1];if(b1&&b1.length===1){$=$||Object.create(null);$[a1]=b1[0];}}return $;}function V(i,j,Z){var $=i.getODataEntityType(i.getODataEntitySet(j).entityType);$.property.forEach(function(_){if(_["com.sap.vocabularies.Common.v1.EditableFieldFor"]){var a1=_["com.sap.vocabularies.Common.v1.EditableFieldFor"].String;var b1=_.name;if(Z[a1]&&!Z[b1]){Z[b1]=Z[a1];}if(Z[b1]&&!Z[a1]){Z[a1]=Z[b1];}}});}function W(j,Z,$){var _=j.oAppComponent.getConfig();var a1;a1=j.oAppComponent.getModel();a1.attachMetadataFailed(j.fnInitializationResolve);a1.getMetaModel().loaded().then(function(){var b1;T(a1,Z,$);var c1=$.preferredMode&&$.preferredMode[0];var d1=$.mode&&$.mode[0];var e1=G(c1,d1);switch(e1.mode){case"create":P(j);var f1=(_.pages[0]&&_.pages[0].component&&_.pages[0].component.settings&&_.pages[0].component.settings.creationEntitySet);Z=f1||Z;var g1=U(j,$);var h1=C.create(j.oAppComponent.getTransactionController().getDraftController(),Z,"/"+Z,a1,j.oTemplateContract.oApplicationProxy,g1);h1.then(function(i){j.navigateToContext(i,"",true,4).then(I.bind(null,j,$));},function(i){I(j,$);j.navigateToMessagePage({title:j.oTemplateContract.getText("ST_GENERIC_ERROR_TITLE"),text:i.messageText,description:"",icon:"sap-icon://message-error"});});j.oTemplateContract.oBusyHelper.setBusy(h1,true);break;case"createWithContext":P(j);var i1=new Promise(function(n1,o1){var p1=function(v1){o1();I(j,$);j.navigateToMessagePage({title:j.oTemplateContract.getText("ST_ERROR"),text:(v1&&v1.messageText)||j.oTemplateContract.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),icon:"sap-icon://message-error",description:""});};b1=a1.getMetaModel().getODataEntitySet(Z);var q1=b1["com.sap.vocabularies.Common.v1.DraftRoot"];if(q1&&q1.NewAction){var r1=a1.getMetaModel().getODataFunctionImport(q1.NewAction.String.split("/")[1]);var s1={};if(r1){var t1=r1.parameter?r1.parameter.length:0;for(var i=0;i<t1;i++){var u1=r1.parameter[i];if(u1.mode==="In"&&$[u1.name]&&$[u1.name][0]){s1[u1.name]=$[u1.name][0];}}a1.callFunction("/"+r1.name,{success:function(v1,w1){var x1=new M(a1);var y1=x1.getContextFromResponse(v1);if(y1){n1();j.navigateToContext(y1,null,true,4).then(I.bind(null,j,$));}else{p1();}},error:p1,method:"POST",urlParameters:s1});}else{p1();}}else{p1();}});j.oTemplateContract.oBusyHelper.setBusy(i1,true);break;case"edit":var j1=e({},$);V(a1.getMetaModel(),Z,j1);var k1=O(a1,j,Z,j1,e1);if(k1.aNavigablePages&&k1.aNavigablePages[0]&&(k1.aNavigablePages[0].bNavigationWithTechnicalKeyPossible||(k1.aNavigablePages[0].aSemanticKey&&k1.aNavigablePages[0].iLevel===0))){var l1="";var m1;if(k1.aNavigablePages[0].bNavigationWithTechnicalKeyPossible){l1=a1.createKey(Z,j1);m1=C.edit(j.oAppComponent.getTransactionController(),Z,"/"+l1,a1,j.oTemplateContract,j.fnInitializationResolve);}else if(k1.aNavigablePages&&k1.aNavigablePages[0]&&k1.aNavigablePages[0].aSemanticKey&&k1.aNavigablePages[0].iLevel===0){l1="";m1=C.edit(j.oAppComponent.getTransactionController(),Z,l1,a1,j.oTemplateContract,j.fnInitializationResolve,k1.aNavigablePages[0].aSemanticKey,j1);}m1.then(function(i){j.navigate(i.context.getPath(),true);I(j);},function(i){if(i.lockedByUser){if(!e1.force){J(a1,j,Z,$,e1);}else{j.fnInitializationResolve();j.navigateToMessagePage({title:j.oTemplateContract.getText("LOCKED_OBJECT_POPOVER_TITLE"),text:j.oTemplateContract.getText("LOCKED_OBJECT_POPOVER_TITLE"),description:j.oTemplateContract.getText("ST_GENERIC_LOCKED_OBJECT_POPOVER_TEXT",[i.lockedByUser]),icon:"sap-icon://message-error",replaceURL:true});}}else if(i.draftAdminReadResponse){I(j,$);}else{var n1=j.oTemplateContract.getText("ST_GENERIC_ERROR_NOT_AUTORIZED_EDIT");c.warning(n1,{onClose:function(o1){J(a1,j,Z,$,{mode:"display",force:false});}});}});}else{I(j,$);}break;case"display":J(a1,j,Z,$,e1);break;default:j.fnInitializationResolve();j.navigateToMessagePage({title:j.oTemplateContract.getText("ST_GENERIC_ERROR_TITLE"),text:j.oTemplateContract.getText("ST_GENERIC_ERROR_TITLE"),description:j.oTemplateContract.getText("PARAMETER_COMBINATION_NOT_SUPPORTED",[d1,c1]),icon:"sap-icon://message-error",replaceURL:true});}});}function X(i){var j=i.oAppComponent.getFlexibleColumnLayout();if(j){i.oTemplateContract.oFlexibleColumnLayoutHandler=new b(i.oTemplateContract.oNavigationHost,i);}var Z=l(i);var $=i.oAppComponent.getComponentData();var _=$&&$.startupParameters;if(Z&&_&&!i.oHashChanger.getHash()){W(i,Z,_);}else{I(i);}}function Y(i,j){var Z,$,_;Z=i.getPath().substring(1);$=Z.split("(");_=$[0];var a1=$[1].substring(0,$[1].length-1);if(j){Z=Z.replace(_,j);if(Z.indexOf("/")===0){Z=Z.substring(1);}}return{entitySet:_,path:Z,key:a1};}var l=t.testableStatic(l,"routingHelpergenerateRoutingMetadataAndGetRootEntitySet");var I=t.testableStatic(I,"routingHelper_initialiseRouting");var A=t.testableStatic(A,"routingHelper_readObject");var W=t.testableStatic(W,"routingHelper_processStartupParameters");var T=t.testableStatic(T,"routingHelper_transformStartupGuidParameters");return{startupRouter:X,determineNavigationPath:Y,readObjectProcessResults:D};});
