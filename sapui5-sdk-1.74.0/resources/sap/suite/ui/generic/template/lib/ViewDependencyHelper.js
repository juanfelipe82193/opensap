sap.ui.define(["sap/ui/base/Object","sap/suite/ui/generic/template/js/AnnotationHelper","sap/suite/ui/generic/template/lib/testableHelper","sap/base/util/extend"],function(B,A,t,e){"use strict";function g(T){function s(E){E=E||[];for(var i in T.componentRegistry){if(E.indexOf(i)===-1){var C=T.componentRegistry[i];C.oComponent.setIsRefreshRequired(true);}}}function a(C,E,l){var p,P,m=T.componentRegistry;var M=C.getId();var o=T.componentRegistry[M];var r=o.routeConfig;if(r){if(r.viewLevel===0){return false;}else{for(var h in m){if(h!==M){p=m[h].routeConfig;if(p&&p.viewLevel===(r.viewLevel-1)&&(r.viewLevel===1||p.entitySet===r.parentEntitySet)){P=m[h].oComponent;b(P,E);if(!l||l>1){var S;S=l&&l-1;a(P,undefined,S);}break;}}}}}}function b(C,E){if(E){var r=T.componentRegistry[C.getId()];var R=r.mRefreshInfos;R[E]=true;if(r.utils.isComponentActive()){r.utils.refreshBinding();}}else if(C.setIsRefreshRequired){C.setIsRefreshRequired(true);}}function c(C){var h=[];var r=T.componentRegistry[C.getId()].routeConfig;for(var o in T.componentRegistry){var O=T.componentRegistry[o];var i=O.routeConfig;if(r.viewLevel+1===i.viewLevel&&r.entitySet===i.parentEntitySet){h.push(O.oComponent);}}return h;}function d(C){var S=[];var h=c(C);for(var i=0;i<h.length;i++){S=S.concat(d(h[i]));}return S.concat(h);}function u(C,h){var S=d(C);if(h){S.push(C);}for(var i=0;i<S.length;i++){T.componentRegistry[S[i].getId()].utils.unbind();}}function f(){if(T.rootContainer){var i=T.rootContainer.getComponentInstance();if(i&&typeof i.setIsRefreshRequired==="function"){i.setIsRefreshRequired(true);}}}var a=t.testable(a,"setParentToDirty");return{setAllPagesDirty:s,setParentToDirty:a,setMeToDirty:b,unbindChildren:u,setRootPageToDirty:f};}return B.extend("sap.suite.ui.generic.template.lib.ViewDependencyHelper",{constructor:function(T){e(this,g(T));}});});
