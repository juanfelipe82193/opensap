sap.ui.define([],function(){"use strict";var R={ERROR:"error",PARSING_ERROR:"parsing error",DATA_TYPE_NOT_SUPPORTED:"data type not supported",SUCCESS:"success"};var a={};var b="GET";var c=["text","json","xml","plain"];a.ajax=function(s){if(!s||typeof s!=="object"){throw new Error("send a valid setting object to call ajax");}var i=(s&&s.async)===undefined?true:s.async;var t=s.type||b;var u=s.url;if(!u||typeof u!=="string"){throw new Error("Provide a proper url to make AJAX call");}var j=g(s.data);var k=t===b;if(j&&k){u=u+"?"+j;}var r=new XMLHttpRequest();if(i){var P=new Promise(function(n,o){r.addEventListener("load",T);r.addEventListener("error",q);r.addEventListener("abort",v);r.open(t,u,true);r.setRequestHeader('Content-Type','application/x-www-form-urlencoded');k?r.send():r.send(j);function T(w){var x=h(w,s);if(x.success){return n(x);}return o(x);}function q(w){o(d(w));}function v(w){o(e(w));}});return P;}else{var l;r.addEventListener("load",function fnTransferComplete(n){l=h(n,s);});r.addEventListener("error",function fnTransferFailed(n){l=d(n);});r.addEventListener("abort",function fnTransferCanceled(n){l=e(n);});r.open(t,u,false);r.setRequestHeader('Content-Type','application/x-www-form-urlencoded');try{k?r.send():r.send(j);}catch(m){l={};l.statusCode=r.status;l.request=r;l.success=false;l.textStatus=R.ERROR;l.error=m;}return l;}};a.getJSON=function(u){return new Promise(function(r,i){a.ajax({url:u,async:true,dataType:"json"}).then(function(j){r(j.data);}).catch(function(j){i(j.error);});});};a.sjax=function(s){if(s.async){throw new Error("AjaxHelper.sjax should not be called with async flag set");}s.async=false;return this.ajax(s);};a.syncGetJSON=function(u){return a.sjax({url:u,dataType:"json"});};function h(i,s){var j=i.target.status;var r={};var k=s.dataType;var l=(j>=200&&j<300)||j===304;if(l){if(k){switch(k){case"json":r=p(i.target.responseText);break;case"xml":r=f(i.target.responseText);break;case"text":r.data=i.target.responseText;break;default:r.success=false;r.textStatus=R.ERROR;r.error=R.DATA_TYPE_NOT_SUPPORTED;}}else{var m=i.target.getResponseHeader("content-type");if(m){var n=m.split("/")[1].split(";")[0];if(c.indexOf(n)+1){k=n;r.request=i.target;switch(k){case"json":r=p(i.target.responseText);break;case"xml":r=f(i.target.responseText);break;default:r.data=i.target.responseText;break;}}else{r.success=false;r.textStatus=R.ERROR;r.error=R.DATA_TYPE_NOT_SUPPORTED;}}}}else{r.success=false;r.textStatus=R.ERROR;r.error=i.target.statusText||R.ERROR;}r.request=i.target;r.statusCode=i.target.status;r.success=r.success!==false;if(r.success){r.textStatus=R.SUCCESS;}return r;}function d(i){var r={};r.statusCode=i.target.status;r.request=i.target;r.success=false;r.textStatus=R.ERROR;r.error=i.target.statusText||R.ERROR;return r;}function e(i){var r={};r.statusCode=i.target.status;r.request=i.target;r.success=false;r.textStatus="aborted";return r;}function p(j){var r={};try{r.data=j===""?undefined:JSON.parse(j);}catch(i){r.success=false;r.textStatus=R.PARSING_ERROR;r.error=i;}return r;}function f(x){var r={};try{r.data=new window.DOMParser().parseFromString(x,"text/xml");}catch(i){r.success=false;r.textStatus=R.PARSING_ERROR;r.error=i;}return r;}function g(i){var j;if(i){j=typeof i=='string'?i:Object.keys(i).map(function(k){return encodeURIComponent(k)+'='+encodeURIComponent(i[k]);}).join('&');}return j;}return a;});
