sap.ui.define(["sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/AnalyticalListPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/AnalyticalListPage/controller/FilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/ToolbarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterDialogController","sap/suite/ui/generic/template/AnalyticalListPage/controller/AnalyticGridController","sap/ui/table/AnalyticalTable","sap/ui/model/odata/AnnotationHelper","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/AnalyticalListPage/controller/ContentAreaController","sap/suite/ui/generic/template/AnalyticalListPage/controller/IappStateHandler","sap/ui/Device","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/library","sap/ui/model/Context","sap/suite/ui/generic/template/AnalyticalListPage/util/AnnotationHelper","sap/base/Log","sap/suite/ui/generic/template/AnalyticalListPage/util/FilterUtil","sap/base/util/ObjectPath","sap/suite/ui/generic/template/lib/ShareUtils","sap/base/util/merge","sap/base/util/deepExtend"],function(S,E,F,T,V,a,A,b,O,c,C,I,D,d,f,g,h,j,k,l,L,m,n,o,p,q){"use strict";var r="chart",s="visual",t="compact",u=900;return{getMethods:function(v,w,x){var y={};y.bVisualFilterInitialised=false;y._bIsStartingUp=true;function z(){var e=x.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isLeaf",e.getIsLeaf());}function B(e,i){var R=e&&e.property;return R.filter(function(U){return typeof U[i]!=="undefined";});}function G(e){var i=e.SelectOptions,R=l.resolveParameterStringValue(e.Parameters);var U=new k(null,"/");var W={};if(i){i.forEach(function(X){X.PropertyName=X.PropertyName.PropertyPath;X.Ranges.forEach(function(Y){Y.Sign=Y.Sign.EnumMember.split("/")[1];Y.Option=Y.Option.EnumMember.split("/")[1];Y.Low=m.resolveSelectOptionValue(U,Y.Low);Y.High=m.resolveSelectOptionValue(U,Y.High);});});W.SelectOptions=i;}if(R){R.forEach(function(X){X.PropertyName=X.PropertyName.PropertyPath;X.PropertyValue=O.format(U,X.PropertyValue)||null;});W.Parameters=R;}return new S(W);}function H(i){var R=i.getModel(),U=R&&R.getMetaModel(),W=U&&U.getODataEntityType(i.getEntityType()),X,Y=U&&U.getODataEntityType(i.getEntityType(),true),Z=l.createSVAnnotation(W,U,y.oController.getOwnerComponent().getQualifier());if(y.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&Z){X=G(p({},Z));}else{if(y.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&!Z){L.warning("No SelectionVariant found in the annotation : No default values filled in FilterBar","","ALPSmartFilterBar");}var $=W&&B(W,"com.sap.vocabularies.Common.v1.FilterDefaultValue"),_,a1,b1,c1,d1,e1=[];try{_=new c.Model(new c.Model.ReferenceByModel(R));d1=_&&_.findQueryResultByName(i.getEntitySet());a1=d1&&d1.getParameterization();b1=a1&&U.getODataEntitySet(a1.getEntitySet().getQName());c1=b1&&U.getODataEntityType(b1.entityType);e1=c1?B(c1,"defaultValue"):[];}catch(e){L.error(e);}if($.length>0||e1.length>0){X=new S();$.forEach(function(f1){var g1=U.createBindingContext(Y+"/property/[${path:'name'}===\'"+f1.name+"']/com.sap.vocabularies.Common.v1.FilterDefaultValue");X.addSelectOption(f1.name,"I","EQ",O.format(g1));});e1.forEach(function(f1){X.addParameter(f1.name,f1.defaultValue);});}}return X;}function J(e){var i=e.getSource(),R=H(i);if(R){y.oIappStateHandler.fnSetFiltersUsingUIState(R.toJSONObject(),true,false);}y.oIappStateHandler.onSmartFilterBarInitialise();x.onInitSmartFilterBarExtension(e);x.templateBaseExtension.onInitSmartFilterBar(e);}function K(){var e=y.oIappStateHandler.onSmartFilterBarInitialized();e.then(function(){y._bIsStartingUp=false;if(y.bVisualFilterInitialised){y.oIappStateHandler.fnUpdateVisualFilterBar();}},function(i){if(i instanceof Error){i.showMessageBox();}y.oIappStateHandler.fnOnError();y._bIsStartingUp=false;}).finally(function(){if(y.oSmartFilterableKPI){var i=y.oSmartFilterableKPI.getContent();i.forEach(function(R){if(R.getSmartFilterId){R._bStopDataLoad=false;R._updateKpiList(true);}});}});}function M(e){var i=e.getSource(),R=e.getParameters().limitReached,U=i.getSelectedIndices(),W,X;if(U.length>0){if(R){W="Your last selection was limited to the maximum of "+i.getLimit()+" items.";w.oServices.oApplication.showMessageToast(W);}}X=i.getParent();w.oCommonUtils.setEnabledToolbarButtons(X);}function N(e){var i=e.getParameters();var R=e.getSource();w.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(R,i);}function P(e){var i,R;i=e.getParameters();R=e.getSource();w.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(R,i,y,undefined,undefined);}function Q(e){var i={shareEmailPressed:function(){var U=w.oCommonUtils.getText("EMAIL_HEADER",[w.oServices.oApplication.getAppTitle()]);sap.m.URLHelper.triggerEmail(null,U,document.URL);},shareJamPressed:function(){o.openJamShareDialog(w.oServices.oApplication.getAppTitle());},getDownloadUrl:function(){var U=y.oSmartTable.getTable();var W=U.getBinding("rows")||U.getBinding("items");return W&&W.getDownloadUrl()||"";},getServiceUrl:function(){var U=i.getDownloadUrl();if(U){U+="&$top=0&$inlinecount=allpages";}var W={serviceUrl:U};if(x.onSaveAsTileExtension){x.onSaveAsTileExtension(W);}return W.serviceUrl;},getModelData:function(){var U=n.get("sap.ushell.Container.getUser");var W=x.getOwnerComponent();var X=W.getAppComponent();var Y=X.getMetadata();var Z=Y.getManifestEntry("sap.ui");var $=(Z&&Z.icons&&Z.icons.icon)||"";var _=Y.getManifestEntry("sap.app");var a1=(_&&_.title)||"";return{serviceUrl:i.getServiceUrl(),icon:$,title:a1,isShareInJamActive:!!U&&U().isJamActive(),customUrl:o.getCustomUrl()};}};o.openSharePopup(w.oCommonUtils,e,i);var R=this.getView().byId("bookmarkButton");R.setBeforePressHandler(function(){e.focus();});}return{onInit:function(){var e=x.getOwnerComponent();L.setLevel(L.Level.WARNING,"ALPSmartFilterBar");var R=e.getModel("_templPriv");R.setProperty("/alp",{filterMode:e.getHideVisualFilter()?t:e.getDefaultFilterMode(),contentView:e.getDefaultContentView(),autoHide:e.getAutoHide(),visibility:{hybridView:(D.system.phone||D.system.tablet&&!D.system.desktop)?false:true},filterChanged:false});y.hideVisualFilter=e.getHideVisualFilter();y.hideVisualFilter=(y.hideVisualFilter===undefined||y.hideVisualFilter!==true)?false:true;y.oSmartFilterbar=x.byId("template::SmartFilterBar");y.oSmartTable=x.byId("table");y.oSmartFilterableKPI=x.byId("template::KPITagContainer::filterableKPIs");y.oPage=x.byId("template::Page");y.oSmartChart=x.byId("chart");if(x.getOwnerComponent().getProperty("dshQueryName")){y.oAnalyticGridContainer=x.byId("template::AnalyticGridContainer");y.oAnalyticGridController=new A();y.oAnalyticGridController.setState(y);}y.alr_compactFilterContainer=x.byId("template::CompactFilterContainer");y.alr_visualFilterContainer=x.byId("template::VisualFilterContainer");y.alr_filterContainer=x.byId("template::FilterContainer");y.alr_visualFilterBar=x.byId("template::VisualFilterBar");y.alp_ColumnListItem=x.byId("template::responsiveHightlightCol");if(y.alr_visualFilterBar){y.alr_visualFilterBar.setSmartFilterId(y.oSmartFilterbar.getId());y.alr_visualFilterBar.attachOnFilterItemAdded(function(i){var f1=i.getParameters();f1.attachBeforeRebindVisualFilter(function(g1){var h1=g1.getParameters();var i1=h1.sEntityType;var j1=h1.sDimension;var k1=h1.sMeasure;var l1=h1.oContext;var b1=y.oController;b1.onBeforeRebindVisualFilterExtension(i1,j1,k1,l1);});});}y.oKpiTagContainer=x.byId("template::KPITagContainer::globalKPIs");y.oFilterableKpiTagContainer=x.byId("template::KPITagContainer::filterableKPIs");if(y.oKpiTagContainer||y.oFilterableKpiTagContainer){sap.ui.require(["sap/suite/ui/generic/template/AnalyticalListPage/controller/KpiTagController"],function(i){i.init(y);});}y.oContentArea=new C();y.oTemplateUtils=w;y.toolbarController=new T();y.oController=x;y.filterBarController=new F();y.filterBarController.init(y);y.oContentArea.createAndSetCustomModel(y);y.oContentArea.setState(y);if(!y.hideVisualFilter){y.visualFilterBarContainer=new V();y.visualFilterBarContainer.init(y);}if(y.alr_visualFilterBar){y.alr_visualFilterBar.addEventDelegate({onAfterRendering:function(){if(y.oSmartFilterbar.isInitialised()){y.oSmartFilterbar.setFilterData({_CUSTOM:y.oIappStateHandler.getFilterState()});}}});}y.oIappStateHandler=new I(y,x,w.oCommonUtils.getNavigationHandler());z();x.byId("template::FilterText").attachBrowserEvent("click",function(){x.byId("template::Page").setHeaderExpanded(true);});R.setProperty("/listReport/isHeaderExpanded",true);if(y.oSmartTable){var U=y.oSmartTable.getTable();}var W="sapUiSizeCozy",X="sapUiSizeCompact",Y="sapUiSizeCondensed";if(w.oCommonUtils.isUiTable(U)||U instanceof b){var Z=x.getView();var $=document.body;if($.classList.contains(W)||Z.hasStyleClass(W)){y.oSmartTable.addStyleClass(W);}else if($.classList.contains(X)||Z.hasStyleClass(X)){var _=e.getComponentContainer().getSettings().condensedTableLayout;if(_===false){y.oSmartTable.addStyleClass(X);}else{y.oSmartTable.addStyleClass(Y);}}}if(y.oSmartFilterableKPI){y.oSmartFilterableKPI.setModel(e.getModel("_templPriv"),"_templPriv");var a1=y.oSmartFilterableKPI.getContent(),b1=y.oController;a1.forEach(function(i){if(i.getSmartFilterId){i.attachBeforeRebindFilterableKPI(function(f1){var g1=f1.getParameters(),h1=g1.selectionVariant,i1=g1.entityType,j1=f1.getSource().getId();b1.onBeforeRebindFilterableKPIExtension(h1,i1,j1);},b1);}});}v.getUrlParameterInfo=function(){return y.oIappStateHandler.getUrlParameterInfo();};v.onComponentActivate=function(){};v.refreshBinding=function(){if(y.alr_visualFilterBar&&y.alr_visualFilterBar.updateVisualFilterBindings){y.alr_visualFilterBar.updateVisualFilterBindings();}if(y.oSmartChart&&y.oSmartChart.rebindChart){y.oSmartChart.rebindChart();}if(y.oSmartTable){w.oCommonUtils.refreshSmartTable(y.oSmartTable);}if(y.oKpiTagContainer){var f1=y.oKpiTagContainer.mAggregations.content;for(var i in f1){if(f1[i]._createGlobalKpi){f1[i]._createGlobalKpi();}}}if(y.oFilterableKpiTagContainer){var f1=y.oFilterableKpiTagContainer.mAggregations.content;for(var i in f1){if(f1[i]._createFilterableKpi){f1[i]._createFilterableKpi();}}}};if(y.alr_visualFilterBar){y.alr_visualFilterBar.attachInitialized(function(i){y.bVisualFilterInitialised=true;if(!y._bIsStartingUp){y.oIappStateHandler.fnUpdateVisualFilterBar(true);}});}y.oSmartFilterbar.attachFilterChange(function(i){var R=e.getModel("_templPriv");y.oIappStateHandler.fnCheckMandatory();var f1=y.oSmartFilterbar.isDialogOpen();var g1=i.getSource(),h1;h1=q({},g1.getFilterData(true));if(f1&&y.visualFilterDialogContainer){var i1=y.visualFilterDialogContainer.oVerticalBox.getModel("_dialogFilter");i1.setData(h1);}else{var j1=y.oController.getOwnerComponent().getModel("_filter");j1.setData(h1);}if(i.getParameters().filterItem){if(!y.hideVisualFilter){y.filterBarController.changeVisibility(i);}R.setProperty('/alp/_ignoreChartSelections',false);}y.filterBarController._updateFilterLink();if(!y.oSmartFilterbar.isLiveMode()&&!y.oSmartFilterbar.isDialogOpen()){if(y.oSmartFilterableKPI&&y.oSmartFilterableKPI.getEnabled()){R.setProperty('/alp/filterChanged',true);}}});var Z=x.getView();var $=document.body;var c1,d1;if($.classList.contains(W)||Z.hasStyleClass(W)){c1=true;}if(c1&&e.getTableType()!=="ResponsiveTable"){var e1=e.getModel("_templPriv");if(D.resize.height<=u){d1=e1.getProperty('/alp/contentView');e1.setProperty('/alp/enableHybridMode',false);e1.setProperty('/alp/contentView',d1==="charttable"?"chart":d1);}y.resizeHandler=function(i){var f1=i.height;if(f1<=u){d1=e1.getProperty('/alp/contentView');e1.setProperty('/alp/enableHybridMode',false);e1.setProperty('/alp/contentView',d1==="charttable"?"chart":d1);}else{e1.setProperty('/alp/enableHybridMode',true);}};D.resize.attachHandler(y.resizeHandler);}},onExit:function(){if(y.resizeHandler){D.resize.detachHandler(y.resizeHandler);}},handlers:{onBack:function(){w.oServices.oNavigationController.navigateBack();},addEntry:function(e){var i=e.getSource();w.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){w.oCommonEventHandlers.addEntry(i,false,y.oSmartFilterbar);},Function.prototype,y);},deleteEntries:function(e){w.oCommonEventHandlers.deleteEntries(e);},onSelectionChange:function(e){var R=e.getSource(),U=R.getModel(),W=R.getModel("_templPriv");var X=U.getMetaModel(),Y=X.getODataEntitySet(this.getOwnerComponent().getEntitySet()),Z=Y["Org.OData.Capabilities.V1.DeleteRestrictions"];var $=(Z&&Z.Deletable&&Z.Deletable.Path)?Z.Deletable.Path:"";var _=false;var a1=true;var b1=($&&$!=="");var c1=w.oCommonUtils.getSelectedContexts(R);if(c1.length>0){for(var i=0;i<c1.length;i++){var d1=U.getObject(c1[i].getPath());if(!(d1.IsActiveEntity&&d1.HasDraftEntity&&d1.DraftAdministrativeData&&d1.DraftAdministrativeData.InProcessByUser)){a1=false;}if(b1){if(U.getProperty($,c1[i])){b1=false;}}if(!a1&&!b1){_=true;break;}}}W.setProperty("/listReport/deleteEnabled",_);},onMultiSelectionChange:M,onChange:function(e){w.oCommonEventHandlers.onChange(e);},onSmartFieldUrlPressed:function(e){w.oCommonEventHandlers.onSmartFieldUrlPressed(e,y);},onContactDetails:function(e){w.oCommonEventHandlers.onContactDetails(e);},onSmartFilterBarInitialise:J,onSmartFilterBarInitialized:K,onEditStateFilterChanged:function(e){e.getSource().fireChange();},onFilterPress:function(e){y.filterBarController.showDialog.call(y.filterBarController);},onClearPress:function(e){y.filterBarController.clearFilters();x.onClearFilterExtension(e);},onGoPress:function(e){y.filterBarController.onGoFilter();},onBeforeSFBVariantSave:function(){if(y.oSmartFilterbar.isDialogOpen()&&!y.hideVisualFilter){y.visualFilterDialogContainer._updateFilterBarFromDialog.call(y.visualFilterDialogContainer);}var e=y.oIappStateHandler.getCurrentAppState();if(!this.getOwnerComponent().getProperty('smartVariantManagement')){delete e.customData["sap.suite.ui.generic.template.genericData"].contentView;}var i=y.oSmartFilterbar.getFilterData(true);var R,U=y.oSmartFilterbar.getBasicSearchControl();if(U&&U.getValue){R=U.getValue();}i._CUSTOM=e.customData;y.oSmartFilterbar.setFilterData(i,true);if(R){y.oSmartFilterbar.getBasicSearchControl().setValue(R);}y.oSmartFilterbar.fireFilterChange();},onAfterSFBVariantLoad:function(e){if(!y.oSmartFilterbar.isDialogOpen()){y.filterBarController._afterSFBVariantLoad();if(y.oSmartFilterableKPI&&!y.oSmartFilterbar.isLiveMode()){var i=y.oSmartFilterableKPI.getContent();i.forEach(function(R){if(R.getSmartFilterId){if(e.getParameter("executeOnSelect")){R.bSearchTriggred=true;}}});}}},onBeforeRebindTable:function(e){w.oCommonEventHandlers.onBeforeRebindTable(e);x.onBeforeRebindTableExtension(e);},onBeforeRebindChart:function(e){},onListNavigate:function(e){w.oCommonEventHandlers.onListNavigate(e,y,x.onListNavigationExtension.bind(x));},onCallActionFromToolBar:function(e){var i=w.oCommonUtils.getParentTable;w.oCommonUtils.getParentTable=function(){return y.oSmartTable;};w.oCommonEventHandlers.onCallActionFromToolBar(e,y);w.oCommonUtils.getParentTable=i;i=null;},onCallActionFromList:function(e){},onDataFieldForIntentBasedNavigation:function(e){w.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,y);},onDataFieldWithIntentBasedNavigation:function(e){w.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,y);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();w.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var R=y.oSmartFilterbar.getUiState({allFilters:false}).getSelectionVariant();w.oCommonUtils.semanticObjectLinkNavigation(i,R,x);},Function.prototype,y,Function.prototype);},onAssignedFiltersChanged:function(e){if(e&&e.getSource()){if(y&&y.oSmartFilterbar&&y.filterBarController){x.byId("template::FilterText").setText(y.oSmartFilterbar.retrieveFiltersWithValuesAsText());}}},onToggleFiltersPressed:function(){var e=x.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isHeaderExpanded",(i.getProperty("/listReport/isHeaderExpanded")===true)?false:true);},onSearchButtonPressed:function(){if(D.system.phone&&y.oPage.getHeaderExpanded()){y.oPage.setHeaderExpanded(false);}var e=x.getOwnerComponent().getModel();if(y.oSmartFilterableKPI&&!y.oSmartFilterableKPI.getEnabled()){y.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/filterChanged',false);}e.attachEventOnce("requestSent",function(){if(!y._bIsStartingUp){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}else{y.oIappStateHandler.fnResolveStartUpPromise();}});y.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/_ignoreChartSelections',true);w.oCommonUtils.refreshModel(y.oSmartTable);},onSemanticObjectLinkPopoverLinkPressed:function(e){w.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,y);},onSemanticObjectLinkNavigationPressed:N,onSemanticObjectLinkNavigationTargetObtained:P,onAfterTableVariantSave:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterApplyTableVariant:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterChartVariantSave:function(e){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();w.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onAfterApplyChartVariant:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFilterModeSegmentedButtonChange:function(e){y.filterBarController.handleFilterSwitch(e.getParameter("key"),e.oSource._bApplyingVariant);y.oController._templateEventHandlers.onSegmentButtonPressed();},onContentViewSegmentButtonPressed:function(e){if(e.getParameter("key")==="crosstable"&&!y.oAnalyticGrid){y.oAnalyticGridController.initAnalyticGrid();}if(!y.oSmartFilterableKPI&&!y.oController.getOwnerComponent().getContentTitle()){var i=y.oController.getView(),R;if(e.getSource().getSelectedKey()==="customview1"){R="template::contentViewExtensionToolbar";}else if(e.getSource().getSelectedKey()==="customview2"){R="template::contentViewExtension2Toolbar";}else if(e.getSource().getSelectedKey()==="chart"||e.getSource().getSelectedKey()==="charttable"){R=i.byId("template::masterViewExtensionToolbar")?"template::masterViewExtensionToolbar":"template::ChartToolbar";}else if(e.getSource().getSelectedKey()==="table"){R="template::TableToolbar";}y.oController._templateEventHandlers.setFocusOnContentViewSegmentedButtonItem(i,R);}y.oController._templateEventHandlers.onSegmentButtonPressed(!y.oController.getOwnerComponent().getProperty('smartVariantManagement'));},setFocusOnContentViewSegmentedButtonItem:function(e,i){var R=e.byId(i);if(R){var U=R.getContent().length,W=R.getContent()[U-1];if(W){W.addEventDelegate({onAfterRendering:function(X){X.srcControl.focus();}});}}},onSegmentButtonPressed:function(i){if(!i){y.oController.byId('template::PageVariant').currentVariantSetModified(true);y.oSmartFilterbar.setFilterData({_CUSTOM:y.oIappStateHandler.getFilterState()});}y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onShareListReportActionButtonPress:function(e){w.oCommonUtils.executeIfControlReady(Q,"template::Share");},onDeterminingDataFieldForAction:function(e){var i=y.oController.getOwnerComponent().getModel("_templPriv");var R=i.getProperty('/alp/contentView');var U=(R===r)?y.oSmartChart:y.oSmartTable;w.oCommonEventHandlers.onDeterminingDataFieldForAction(e,U);},onDeterminingDataFieldForIntentBasedNavigation:function(e){var i=e.getSource();var R=y.oController.getOwnerComponent().getModel("_templPriv");var U=R.getProperty('/alp/contentView');var W=(U===r)?y.oSmartChart:y.oSmartTable.getTable();w.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(i,W,y);},onInlineDataFieldForAction:function(e){w.oCommonEventHandlers.onInlineDataFieldForAction(e,y);},onInlineDataFieldForIntentBasedNavigation:function(e){w.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),y);},onAutoHideToggle:function(){y.oSmartTable.getModel("_tableHighlight").setProperty("/highlightMode","eyeModeSwitch");y.chartController&&y.chartController._updateTable();y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFullScreenToggled:function(e){var i=e.getParameter("fullScreen");var R=e.getSource().getModel("_templPriv");R.setProperty("/alp/fullScreen",i);},onDialogClosed:function(e){y.visualFilterDialogContainer._closeDialog.call(y.visualFilterDialogContainer);},onDialogOpened:function(e){var i=y.oSmartFilterbar.getFilterDialogContent();if(!y.visualFilterDialogContainer){y.visualFilterDialogContainer=new a();y.visualFilterDialogContainer.init(y);}if(i.length<2){y.filterBarController.fnCheckMandatory();var R=[new d({icon:"sap-icon://filter-fields",width:"inherit",key:t,tooltip:"{i18n>FILTER_COMPACT}"}),new d({icon:"sap-icon://filter-analytics",width:"inherit",key:s,tooltip:"{i18n>FILTER_VISUAL}",enabled:"{_templPriv>/alp/searchable}"})];var U=new f({width:"inherit",selectedKey:t,items:R,select:function(e){var Z=e.getSource();Z.setSelectedKey(t);y.visualFilterDialogContainer._toggle.call(y.visualFilterDialogContainer);}}).addEventDelegate({onAfterRendering:function(e){if(e.srcControl.getCustomData()[0]&&e.srcControl.getCustomData()[0].getValue()){e.srcControl.focus();e.srcControl.removeAllCustomData();}}});var W=y.visualFilterDialogContainer._createForm();y.oSmartFilterbar.addFilterDialogContent(W);var X=new g({design:j.ToolbarDesign.Transparent,content:[new h(),U]}).addStyleClass("sapSmartTemplatesAnalyticalListPageFilterDialogToolbar");i[0].setToolbar(X);U.setModel(y.oController.getView().getModel("_templPriv"),"_templPriv");}var Y=y.oController.getView().getModel("_templPriv");if(Y.getProperty("/alp/searchable")){if(Y.getProperty("/alp/filterMode")===s){y.oSmartFilterbar.addFilterDialogContent(i[1]);if(D.system.desktop&&(!D.system.phone||!D.system.tablet)){y.oSmartFilterbar.setContentWidth(790);y.oSmartFilterbar.setContentHeight(685);}else if(D.system.tablet){if(D.orientation.portrait){y.oSmartFilterbar.setContentWidth(400);y.oSmartFilterbar.setContentHeight(720);}else if(D.orientation.landscape){y.oSmartFilterbar.setContentWidth(512);y.oSmartFilterbar.setContentHeight(861);}}}else{y.oSmartFilterbar.addFilterDialogContent(i[0]);}}else{y.oSmartFilterbar.addFilterDialogContent(i[0]);}},onSearchForFilters:function(e){y.visualFilterDialogContainer._triggerSearchInFilterDialog.call(y.visualFilterDialogContainer,e);},onDialogSearch:function(e){y.visualFilterDialogContainer._searchDialog.call(y.visualFilterDialogContainer);},onDialogClear:function(e){x.onClearFilterExtension(e);},onRestore:function(e){y.visualFilterDialogContainer._restoreDialog.call(y.visualFilterDialogContainer);},onDialogCancel:function(e){y.visualFilterDialogContainer._cancelDialog.call(y.visualFilterDialogContainer);},onDataReceived:function(e){y.oContentArea.enableToolbar();w.oCommonEventHandlers.onDataReceived(e);},onRowSelectionChange:function(e){var i=e.getSource();w.oCommonUtils.setEnabledToolbarButtons(i);}},extensionAPI:new E(w,x,y)};}};});
