<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extending Apps Using a Canvas Page</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content="You can embed content into a canvas page within an app."><meta name="description" content="You can embed content into a canvas page within an app."><meta name="content category" content="development"><meta name="target-language" content="zh-CN"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"59bfd317ed5d4af3b490abbe7a9731d8.html","previousTopicHref":"52fc48b479314d0688be24f699778c47.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loio82c4b57424804ae2bc7f937c9b403525"><h1 class="title topictitle1" hidden>Extending Apps Using a Canvas Page</h1><div class="body conbody"><p class="shortdesc" hidden>You can embed content into a canvas page within an app.</p>
<p class="p">A canvas page is an empty custom page in a SAP Fiori elements-based app. The content
needs to be provided by an embedded implementing component. </p>
<p class="p">The corresponding section in the manifest looks like this:</p>
<aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...     
 &quot;sap.ui.generic.app&quot;: {   
    ...   
        &quot;pages&quot;: {
            &quot;thePageName&quot;: {     
                &quot;component&quot;: {          
                    &quot;name&quot;: &quot;sap.suite.ui.generic.template.Canvas&quot;,
                    &quot;settings&quot;: {
                    }   
                },
                &quot;implementingComponent&quot;: {                              
                    &quot;componentName&quot;: &quot;theImplementingComponentQualifiedName&quot;,
                        &quot;settings&quot;: {                                   
                        ...                             
                    }
                }
            }                       
        },
        ...
}
...
</pre></aside>
<p class="p">You can use the <samp class="ph codeph">componentUsage</samp> property instead of
<samp class="ph codeph">componentName</samp> to faciliate a <a class="xref" href="../../#/api/sap.ui.core.Component/methods/createComponent" target="_top" alt="#/api/sap.ui.core.Component/methods/createComponent" title="#/api/sap.ui.core.Component/methods/createComponent">component usage</a> that has been defined in the corresponding
section of the manifest. </p>
<div class="p">There are two settings sections:<ul class="ul" id="loio82c4b57424804ae2bc7f937c9b403525__ul_xts_2g3_4fb">
<li class="li">
<p class="p">The settings section placed in the <samp class="ph codeph">component</samp> section
contains properties which are specific to the canvas component.</p>
</li>
<li class="li">
<p class="p">The settings section placed in the <samp class="ph codeph">implementingComponent</samp>
section can be used to define a data binding between public properties of
the embedding component and context information. This corresponds to
embedding a reuse component on an object page. See <a class="xref" href="../../#/topic/d869d7ab3caa48b2a20dc20dfa248380.html" title="You can embed a reuse component as a section in the object page of your app." target="_top">Including Reuse Components on an Object Page</a>.</p>
</li>
</ul></div>
<p class="p">For example, the following snippet allows the implementing component to use the <a class="xref" href="../../#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/addFooterBarToPage" target="_top" alt="#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/addFooterBarToPage" title="#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/addFooterBarToPage">addFooterBarToPage</a> method to add the standard footer bar to
the canvas page:</p>
<aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_1_title"><div class="title" id="note_1_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...       
&quot;sap.ui.generic.app&quot;: {     
    ...         
        &quot;pages&quot;: {
            &quot;thePageName&quot;: {                
                &quot;component&quot;: {                          
                    &quot;name&quot;: &quot;sap.suite.ui.generic.template.Canvas&quot;,             
                    &quot;settings&quot;: { 
                        &quot;requiredControls&quot;: {                    
                            &quot;footerBar&quot;: true      
                        } 
                    }   
                },
                &quot;implementingComponent&quot;: {                              
                    &quot;componentName&quot;: &quot;theImplementingComponentQualifiedName&quot;,
                            &quot;settings&quot;: {                                   
                        ...                             
                    }
                }
            }                       
        },
        ...
}
...
</pre></aside>
<p class="p">If the canvas page is to include flexible column action buttons (via <a class="xref" href="../../#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/getFlexibleColumnLayoutActionButtons" target="_top" alt="#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/getFlexibleColumnLayoutActionButtons" title="#/api/sap.suite.ui.generic.template.Canvas.extensionAPI.ExtensionAPI/methods/getFlexibleColumnLayoutActionButtons">getFlexibleColumnLayoutActionButtons</a>), replace the
<samp class="ph codeph">footerBar</samp> setting by <samp class="ph codeph">flexibleColumnLayoutActions</samp>
in the snippet above. You can also use both controls.</p>
<div class="section" id="loio82c4b57424804ae2bc7f937c9b403525__section_bsx_vg3_4fb"><section class="section" type="Navigating to a Canvas Page"><h2 class="section_title" style="font-size: 1.15em;">Navigating to a Canvas Page</h2><p class="p">To implement
navigation to a canvas page, you need to add an additional section to the
manifest:</p><aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...       
&quot;sap.ui.generic.app&quot;: {     
    ...         
        &quot;pages&quot;: {
            &quot;thePageName&quot;: {                
                &quot;component&quot;: {                          
                    &quot;name&quot;: &quot;sap.suite.ui.generic.template.Canvas&quot;,             
                    &quot;settings&quot;: { 
                        &quot;requiredControls&quot;: {                    
                            &quot;footerBar&quot;: true      
                        } 
                    }   
                },
                &quot;implementingComponent&quot;: {                              
                    &quot;componentName&quot;: &quot;theImplementingComponentQualifiedName&quot;,
                            &quot;settings&quot;: {                                   
                        ...                             
                    }
                },
                &quot;routingSpec&quot;: {
                    &quot;noOData&quot;: true,
                    &quot;noKey&quot;: true,
                    &quot;routeName&quot;: &quot;theRouteName&quot;
                }
            }                       
        },
        ...
}
...
</pre></aside><p class="p"><samp class="ph codeph">theRouteName</samp> is used to build a route name
within the app. Therfore, the same name must not be used twice within an app.
Additionally, the name of this route must not be identical with the name of any
entity set or any navigation property within the OData service on which the app is
based. Below, finde an exception from this rule.</p><p class="p">The
<samp class="ph codeph">routingSpec</samp> as defined above enables navigation to the canvas
page. You must use the extension API to trigger navigation, as shown in the
following code snippet. Place this piece of code in an appropriate event handler
(for example, in the press-handler of a button) in the controller extension of the
source page of the navigation.</p><aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_3_title"><div class="title" id="note_3_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...
var oApi = this.extensionAPI;   
var oNavigationController = oApi.getNavigationController();   
oNavigationController.navigateInternal(&quot;&quot;, {     routeName: &quot;theRouteName&quot;   });  

...
</pre></aside><aside class="note" aria-labelledby="note_4_title"><div class="title" id="note_4_title"><strong>Note</strong></div>
<p>The instance of the extension API used for this purpose must
belong to the parent page of the canvas page the navigation leads to.</p></aside><p class="p">For
example, the corresponding structure in the manifest might look like this:</p><aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_5_title"><div class="title" id="note_5_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...       
&quot;sap.ui.generic.app&quot;: {     
...
    &quot;pages&quot;: {
        &quot;theParentPageName&quot;: {
            &quot;entitySet&quot;: &quot;theMainEntitySet&quot;,
            &quot;component&quot;: {
                &quot;name&quot;: &quot;sap.suite.ui.generic.template.ObjectPage&quot;,
                &quot;settings&quot;: {
                    ...
                }
            }           
            &quot;pages&quot;: {
                &quot;thePageName&quot;: {                
                    &quot;component&quot;: {                          
                        &quot;name&quot;: &quot;sap.suite.ui.generic.template.Canvas&quot;,             
                        &quot;settings&quot;: { 
                            ...
                        } 
                    },  
                    &quot;implementingComponent&quot;: {                              
                        &quot;componentName&quot;: &quot;theImplementingComponentQualifiedName&quot;,
                                &quot;settings&quot;: {                                   
                            ...                             
                        }
                    },
                    &quot;routingSpec&quot;: {
                        &quot;noOData&quot;: true,
                        &quot;noKey&quot;: true,
                        &quot;routeName&quot;: &quot;theRouteName&quot;
                    }
                },
                ...                         
            }

        },
        ...
    }
...
}
</pre></aside><p class="p">In this case, only the the extension API that belongs to the
<samp class="ph codeph">theParentPageName</samp> page can be used to navigate to the
<samp class="ph codeph">thePageName</samp> canvas page. Note that the context of the parent
page is passed to the canvas page in this scenario. In this example, this means that
controls that are embedded in the
<samp class="ph codeph">theImplementingComponentQualifiedName</samp> component can be directly
bound to properties of <samp class="ph codeph">theMainEntitySet</samp>. This context is also
passed to the standard lifecycle methods <samp class="ph codeph">stStart</samp>and
<samp class="ph codeph">stRefresh</samp> of the
<samp class="ph codeph">theImplementingComponentQualifiedName</samp> component.</p><div class="sectiondiv subsection">
<p class="p subsectiontitle">Navigating to a Canvas Page with an Additional
Key</p>
<p class="p">The navigation techniques described above enable you to add a canvas page that
shows additional information for the same object as its parent page.</p>
<p class="p">If you want the canvas page to display information that depends on what a user
has chosen on the parent page, you need to set the <samp class="ph codeph">noKey</samp>
parameter in the <samp class="ph codeph">routingSpec</samp> to false. The manifest of the app
then looks like this: </p>
<aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_6_title"><div class="title" id="note_6_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...       
&quot;sap.ui.generic.app&quot;: {     
...
    &quot;pages&quot;: {
        &quot;theParentPageName&quot;: {
            &quot;entitySet&quot;: &quot;theMainEntitySet&quot;,
            &quot;component&quot;: {
                &quot;name&quot;: &quot;sap.suite.ui.generic.template.ObjectPage&quot;,
                &quot;settings&quot;: {
                    ...
                }
            }           
            &quot;pages&quot;: {
                &quot;thePageName&quot;: {                
                    &quot;component&quot;: {                          
                        &quot;name&quot;: &quot;sap.suite.ui.generic.template.Canvas&quot;,             
                        &quot;settings&quot;: { 
                            ...
                        } 
                    },  
                    &quot;implementingComponent&quot;: {                              
                        &quot;componentName&quot;: &quot;theImplementingComponentQualifiedName&quot;,
                                &quot;settings&quot;: {                                   
                            ...                             
                        }
                    },
                    &quot;routingSpec&quot;: {
                        &quot;noOData&quot;: true,
                        &quot;noKey&quot;: false,
                        &quot;routeName&quot;: &quot;theRouteName&quot;
                    }
                },
                ...                         
            }


        },
        ...
    }
...
}
</pre></aside>
<p class="p">In this case, the information about the users&apos; choice can be passed as a
parameter in the navigation. </p>
<p class="p">You can place the code in a suitable event handler, as described above.
Alternatively, if the canvas page is the target of the standard navigation
provided in one of the tables displayed on the source page, the
<samp class="ph codeph">onListNavigationExtension</samp> (list report, object page)
function should be used to place this code.</p>
<p class="p">In this alternative scenario, choose the value of the <samp class="ph codeph">routeName</samp>
manifest property carefully, based on the following decision options:</p>
<ul class="ul" id="loio82c4b57424804ae2bc7f937c9b403525__ul_ryb_psd_wfb">
<li class="li">
<p class="p">The standard object page for the corresponding entity is still in place.
This means that the standard navigation is only redirected to the canvas
page on a case-by-case basis. In this case, the normal rules for
choosing <samp class="ph codeph">theRouteName</samp> apply.</p>
</li>
<li class="li">
<p class="p">The standard object page for the corresponding entity set is not there.
In this case, choose the name of the corresponding entity set as the
<samp class="ph codeph">theRouteName</samp>. This overrules the guideline that
<samp class="ph codeph">theRouteName</samp> should be different from all entity
set names. If there is more than one canvas page (and the correct one is
chosen on a case-by-case basis), only one value of the <samp class="ph codeph">
routeName</samp> property should be set to the name of the entity
set.</p>
</li>
</ul>
<p class="p">In all scenarios, the code for executing the navigation should look like
this:</p>
<aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_7_title"><div class="title" id="note_7_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...
var oApi = this.extensionAPI;   
var oNavigationController = oApi.getNavigationController();
var sUsersChoice = ... // do whatever is necessary to determine the users choice   
oNavigationController.navigateInternal(sUsersChoice, {     routeName: &quot;theRouteName&quot;   });  

...
</pre></aside>
<p class="p">Note that only one string can be passed to the canvas page in this fashion. If
the information to be passed to the canvas page is complex, the application
needs to encode this information in one string.</p>
<p class="p">The following piece of code shows how the information about the user&apos;s choice can
be evaluated in the implementing component of the canvas page:</p>
<aside class="note sap-samplecodeblock samplecode" aria-labelledby="note_8_title"><div class="title" id="note_8_title"><strong>Sample Code</strong></div>
<pre class="pre codeblock prettyprint">
...

  stRefresh: function(oModel, oBindingContext, oExtensionAPI) {
    var oNavigationController = oExtensionAPI.getNavigationController();    
    var aKeys = oNavigationController.getCurrentKeys();    
    var sUserChoice = aKeys[aKeys.length - 1];
    var oComponentModel = this.getComponentModel();    
    oComponentModel.setProperty(&quot;/UsersChoice&quot;, sUserChoice);     
}

...
</pre></aside>
</div></section></div>
</div><div class="related-links"> <div class="relinfo"><div class="relinfotitle ">Related Information</div><div><a class="link" href="../../#/topic/6314fcd2510648fbaad3cee8a421030d.html" title="Follow these guidelines when developing reuse components that are to be included as sections in object pages." target="_top">Developing Reuse Components</a></div></div></div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>