<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en-us" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Enabling UI Adaptation: Other Things to Consider</title><link rel="icon" href="themes/sap-default/img/favicon.ico" type="image/x-icon"><link rel="shortcut icon" href="themes/sap-default/img/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="abstract" content><meta name="description" content><meta name="content category" content="development"><meta name="target-language" content="zh-CN"><script type="text/javascript">var d4p = {"relativePath":'',"dev":false,"debug":false,"draft":false,"nextTopicHref":"35274280504f42cd87cc4fd3d403ca91.html","previousTopicHref":"f1430c0337534d469da3a56307ff76af.html"}</script><link rel="stylesheet" type="text/css" media="screen, projection" href="themes/sap-default/css/style.css"><script type="text/javascript">
      
        d4p.cssGridPath = d4p.dev ? 'html5-themes/modules/960-Responsive-Grid/css/' : 'themes/dita-d4p-classic/css/';
        var ADAPT_CONFIG = {
          // Where is your CSS?
          path: d4p.relativePath + d4p.cssGridPath,

          // false = Only run once, when page first loads.
          // true = Change on window resize and page tilt.
          dynamic: true,

          // Optional callback... myCallback(i, width)
          callback: doc_resize,

          // First range entry is the minimum.
          // Last range entry is the maximum.
          // Separate ranges by "to" keyword.
          range: [
             // small (size-0)
            '0px    to 760px  =',
             // medium (size-1, size-2)
            '760px  to 980px  = ',
            '980px  to 1270px = ',
             // large (size-3, size-5)
            '1270px to 1600px = ',
            '1600px to 1940px = ',
             // extra large (size-6)
            '1940px to 2540px = ',
            '2540px           = '
          ]
        };

        function doc_resize(i, width)
        {
          d4p.setBodyClassfunction(i, width);
        }


        
      </script><script type="text/javascript" src="toc-info.js"></script><script type="text/javascript" src="themes/sap-default/js/script.js"></script>
		<!--[if lt IE 9]>
			<script>
			  var e = ("abbr,article,aside,audio,canvas,datalist,details," +
			    "figure,footer,header,hgroup,mark,menu,meter,nav,output," +
			    "progress,section,time,video").split(',');
			  for (var i = 0; i < e.length; i++) {
			    document.createElement(e[i]);
			  }
			</script>
		<![endif]-->
        
    <script>
      function addLoadEvent(func) {
        var oldonload = window.onload;
        if (typeof window.onload != 'function') {
          window.onload = func;
        } else {
          window.onload = function() {
            if (oldonload) {
              oldonload();
        }
        func();
       }
     }
     }
      
    addLoadEvent(function() { prettyPrint();
if ($('#local-navigation').length) {
        $('#local-navigation').navigation();
    }


});
      
    </script>
     <script type="text/javascript" src="js/prettify.js"> </script><script id="search-processing" type="text/javascript" src="js/search-processing.js"> </script><script>function handleAreaClick(oArea) {window.parent.location.href = oArea.href;}</script><link type="text/css" rel="stylesheet" href="css/overrides.css"></head><body class="en-us sap-default centered navigation-default toc-injection enumeration-disabled" style="font-family: &apos;72&apos;, Arial, Helvetica, sans-serif;"><div id="d4h5-main-container" class="container_12" role="application"><ul id="page-links" class="hidden"><li><a id="skip-to-content" href="#d4h5-main-content">Skip to content</a></li><li><a id="skip-to-localnav" href="#local-navigation">Skip to navigation</a></li><li><a id="skip-to-footer" href="#footer-container">Skip to footer</a></li></ul><div id="d4h5-section-container" class="grid_12" style="padding-top: 0;"><div id="d4h5-main-content" class="grid_8 alpha omega" style="margin: 0 0.5em;"><section><div id="content-toolbar" class="toolbar hide-for-small"></div><div class="page concept  - topic-topic concept-concept " id="loiode9fd55c69af4b46863f5d26b5d796c4"><h1 class="title topictitle1" hidden>Enabling UI Adaptation: Other Things to Consider</h1><div class="body conbody"><p class="shortdesc" hidden></p>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_j4v_lnn_2jb"><section class="section" type="How to Improve the Performance"><h2 class="section_title" style="font-size: 1.15em;">How to Improve the Performance</h2><div class="sectiondiv subsection">
<p class="p subsectiontitle">Use Asynchronous Loading of Views</p>
<p class="p">To enable processing of UI changes directly on XML views, use the asynchronous loading of views. For more information, see <a class="xref" href="../../#/topic/68d0e58857a647d49470d9f92dd859bd.html" title="To instantiate views asychronously, SAPUI5 provides the factory method View.create defined in module sap/ui/core/mvc/View." target="_top">Instantiating Views</a>.</p>
<aside class="note tip" aria-labelledby="note_0_title"><div class="title" id="note_0_title"><strong>Tip</strong></div>
<p>Using the rule <samp class="ph codeph">Asynchronous XML views in the Support Assistant,</samp> you can check whether asynchronous
loading is used for all views. For more information, see <a class="xref" href="../../#/topic/57ccd7d7103640e3a187ed55e1d2c163.html" title="The Support Assistant enables developers to check whether their apps are built according to the SAPUI5 best practices and guidelines." target="_top">Support Assistant</a>.</p></aside>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Use View Caching</p>
<p class="p">If you use view caching, our views are stored in the cache after UI changes have been applied. The view (including the UI changes)
is then subsequently loaded from the cache. For more information, see <a class="xref" href="../../#/topic/3d85d5eec1594be0a71236d5e61f89aa.html" title="To be able to speed up processing times of XML views that make heavy use of the preprocessor feature, you can use the view cache to store its processed XML source. Then according network requests for the source and all preprocessor runs that modify the XML source are skipped and the source is taken from the cache." target="_top">XML View Cache</a>.</p>
</div></section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_ghl_f4n_2jb"><section class="section" type="Configure the Variant Management Control"><h2 class="section_title" style="font-size: 1.15em;">Configure the Variant Management Control</h2>

<p class="p">If users should be able to save their UI changes as different views (control variants), you have to configure the <span class="ph"><a class="xref" href="../../#/api/sap.ui.fl.variants.VariantManagement" target="_top" alt="#/api/sap.ui.fl.variants.VariantManagement" title="#/api/sap.ui.fl.variants.VariantManagement"><samp class="ph codeph">sap.ui.fl.variants.VariantManagement</samp></a> control.</span>
</p>
<p class="p">All you have to do is add this control to an appropriate location in your app, and assign the desired UI container as a target in a
<samp class="ph codeph">for</samp> association.</p>
</section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_rvb_cpn_2jb"><section class="section" type="Enable the Key User to Add Additional UI Elements"><h2 class="section_title" style="font-size: 1.15em;">Enable the Key User to Add Additional UI Elements</h2>

<div class="p">To enable the key user to make additional properties of an OData entity visible (typically when the key user adds fields or custom
fields), you have to do the following:<ul class="ul" id="loiode9fd55c69af4b46863f5d26b5d796c4__ul_e4r_gpn_2jb">
<li class="li">Use data binding in the container where you want to enable this.</li>
<li class="li">Make sure that the related OData model is the default model of your app component. For more information, see <a class="xref" href="../../#/topic/91f0d1c56f4d1014b6dd926db0e91070.html" title="If you don&apos;t want to use a component or descriptor file, you have to assign the model instance manually to the UI, before you can bind controls to this model instance." target="_top">Assigning the Model to the UI</a>.</li>
<li class="li">If a property of an OData entity shouldn&apos;t come up in key user adaptation, for example, because it&#x2019;s a technical field, you
should set the annotation <samp class="ph codeph">sap:visible=false</samp>. If the property is only relevant under certain circumstances,
you can provide the <samp class="ph codeph">field-control</samp> property and set the field to be hidden. For more information, see the
<a class="extlink" href="http://help.sap.com/disclaimer?site=https://wiki.scn.sap.com/wiki/display/EmTech/SAP+Annotations+for+OData+Version+2.0#SAPAnnotationsforODataVersion2.0-Property_field_controlAttributesap:field-control" target="_blank" alt="https://wiki.scn.sap.com/wiki/display/EmTech/SAP+Annotations+for+OData+Version+2.0#SAPAnnotationsforODataVersion2.0-Property_field_controlAttributesap:field-control" title="https://wiki.scn.sap.com/wiki/display/EmTech/SAP+Annotations+for+OData+Version+2.0#SAPAnnotationsforODataVersion2.0-Property_field_controlAttributesap:field-control">official annotations documentation<img src="themes/sap-default/img/sap_link.png" class="link-sap" alt="Information published on SAP site" title="Information published on SAP site" border="0"></a>.</li>
<li class="li">If you don&#x2019;t have OData models or if you want to give the key user the option to enable more complex UI parts, you can deliver
hidden controls (<samp class="ph codeph">visible=&quot;false&quot;</samp>), which can then be made visible via key user adaptation.</li>
</ul></div>
</section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_e2v_xpn_2jb"><section class="section" type="Reuse Components"><h2 class="section_title" style="font-size: 1.15em;">Reuse Components</h2><p class="p">If you are using reuse components, dialogs or popovers inside
your application, they must have the application component as owner component (<samp class="ph codeph">type=component</samp>). Make sure to
instantiate it using a <samp class="ph codeph">runAsOwner</samp> function.</p><div class="sectiondiv subsection">
<p class="p subsectiontitle">About Reuse Components</p>
<p class="p">During key user adaptation, only the specific UIs/applications are adapted, but not the reuse components themselves. Key user
adaptation follows a WYSIWYG approach, and since the use cases can vary from app to app, the UI changes done inside a reuse
component of one app won&apos;t be applicable for another app where the same reuse component is used. Therefore, any changes to the UIs
inside a reuse component will be stored only in the context of the app in which it was embedded.</p>




</div></section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_restrictadaptation"><section class="section" type="Restrict Adaptation for Certain Controls"><h2 class="section_title" style="font-size: 1.15em;">Restrict Adaptation for Certain Controls</h2><div class="p">It can be a good idea to exclude certain
controls from key user adaptation. Examples:<ul class="ul" id="loiode9fd55c69af4b46863f5d26b5d796c4__ul_ylv_gtd_ygb">
<li class="li">Controls for standard actions that should not be <span class="ph emphasis emphasis">removed</span> (for example, the <span class="ph uicontrol">Close</span>
button)</li>
<li class="li">Controls that should not be <span class="ph emphasis emphasis">changed</span>, because their properties are changed dynamically by the application
coding, which will consequently overwrite key user changes</li>
</ul></div><div class="p">To achieve this, you need instance-specific design time metadata. You attach these metadata via the
<samp class="ph codeph">sap.ui.dt</samp> namespace and the <samp class="ph codeph">designtime</samp> attribute to the xml node of the control you want to
restrict, or via <samp class="ph codeph">CustomData</samp>. There are two types of restrictions:<ul class="ul" id="loiode9fd55c69af4b46863f5d26b5d796c4__ul_epn_55d_ygb">
<li class="li">Control cannot be <span class="ph emphasis emphasis">removed</span> (recommended, for example, for standard actions):<p class="p">Required metadata:
<samp class="ph codeph">not-removable</samp></p></li>
<li class="li">Control cannot be <span class="ph emphasis emphasis">changed</span> (recommended, for example, if the control properties are changed dynamically by
the application coding):<p class="p">Required metadata: <samp class="ph codeph">not-adaptable</samp></p></li>
</ul><aside class="note" aria-labelledby="note_2_title"><div class="title" id="note_2_title"><strong>Note</strong></div>
<p class="p">Controls that have already been delivered with previous app versions should <span class="ph uicontrol">not</span> be switched to
<samp class="ph codeph">not-removable</samp> or <samp class="ph codeph">not-adaptable</samp> later. Reason: Setting these metadata later will not
affect existing changes and might even cause regressions.</p></aside>The process to define the design time metadata depends on your scenario:</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">XML View</p>
<p class="p">In this case, you need to specify metadata via the <samp class="ph codeph">sap.ui.dt</samp> namespace. Example:</p>
<pre class="pre codeblock prettyprint lang-xml">&lt;core:View
	...
	xmlns:sap.ui.dt=&quot;sap.ui.dt&quot;
&gt;
	...
	&lt;SomeControl sap.ui.dt:designtime=&quot;not-removable&quot; /&gt;
	&lt;SomeOtherControl sap.ui.dt:designtime=&quot;not-adaptable&quot; /&gt;
	...
&lt;/core:View&gt;</pre>
</div><div class="sectiondiv subsection">
<p class="p subsectiontitle">Control Is Instantiated by JavaScript Code</p>
<p class="p">In this case, you need to provide the instance-specific design time metadata as custom data. Example:</p>
<pre class="pre codeblock prettyprint lang-js">new SomeControl({
	//other settings
	customData :  [new CustomData({
		key : &quot;sap-ui-custom-settings&quot;,
		value : {
			&quot;sap.ui.dt&quot; : {
				&quot;designtime&quot;: &quot;not-removable&quot; || &quot;not-adaptable&quot;
			}
		}
	})];
});</pre>
</div></section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_s5x_314_2jb"><section class="section" type="When Are Key User Changes Applied?"><h2 class="section_title" style="font-size: 1.15em;">When Are Key User Changes Applied?</h2>

<ul class="ul" id="loiode9fd55c69af4b46863f5d26b5d796c4__ul_sjk_ccp_2jb">
<li class="li">Changes are applied to controls only during XML view processing.</li>
<li class="li">If you use the <samp class="ph codeph">placeAt</samp> method to place a control inside a node of the document object model (DOM) or inside
another control, the changes are applied only when the control is added to the SAPUI5 control tree.</li>
</ul>
<p class="p">We optimize applying changes at startup. You may use <samp class="ph codeph">sap.ui.fl.apply.api.FlexRuntimeInfoAPI.waitForChanges</samp> to wait
until all changes have been processed.</p>
</section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_af4_cb4_2jb"><section class="section" type="Can I Check for Stable IDs During Automatic Testing?"><h2 class="section_title" style="font-size: 1.15em;">Can I Check for Stable IDs During Automatic Testing?</h2>

<p class="p">Yes. You can integrate corresponding check from the Support Assistant rule into your Opa5 tests as described in <a class="xref" href="../../#/topic/cfabbd4dfc054936997d9d00916e1668.html" title="The Support Assistant can be used as part of an existing OPA test to cover more test aspects of the application." target="_top">Integrating the Rules in OPA Tests</a>.</p>
</section></div>
<div class="section" id="loiode9fd55c69af4b46863f5d26b5d796c4__section_k2w_3b4_2jb"><section class="section" type="Can I Do Manual Testing?"><h2 class="section_title" style="font-size: 1.15em;">Can I Do Manual Testing?</h2>

<div class="p">To test key user adaptation in your <a class="xref" href="https://help.sap.com/viewer/825270ffffe74d9f988a0f0066ad59f0/CF/en-US/6609d3ba857742ef99432b6b0472ade0.html" target="_blank" alt="https://help.sap.com/viewer/825270ffffe74d9f988a0f0066ad59f0/CF/en-US/6609d3ba857742ef99432b6b0472ade0.html" title="https://help.sap.com/viewer/825270ffffe74d9f988a0f0066ad59f0/CF/en-US/6609d3ba857742ef99432b6b0472ade0.html"><span class="ph pname">SAP Fiori</span> launchpad sandbox</a> (locally or in the SAP
Web IDE preview), include the following script in the HTML file that you use for sandbox testing. With these configurations, you
should be able to start key user adaptation as
usual.<pre class="pre codeblock prettyprint lang-html">&lt;script type=&quot;text/javascript&quot;&gt;
    window[&quot;sap-ushell-config&quot;] = {
        defaultRenderer : &quot;fiori2&quot;,
        bootstrapPlugins: {
            &quot;RuntimeAuthoringPlugin&quot; : {
                &quot;component&quot;: &quot;sap.ushell.plugins.rta&quot;,
                config: {
                    validateAppVersion: false
                }
            }
        }
    }
&lt;/script&gt;
</pre></div>

</section></div>
</div></div></section><div class="clear"></div>
</div><div class="clearfix"></div></div></div><div class="clearfix"></div><div id="footer-container" class="grid_12"><footer>
	<div id="custom-footerSpacer"></div>
	
</footer>
</div></body></html>