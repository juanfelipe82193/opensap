<!DOCTYPE HTML><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge" /><title>Crosstab API test</title><script id="sap-ui-bootstrap" type="text/javascript"	src="../../../../resources/sap-ui-core.js"	data-sap-ui-theme="sap_belize"	data-sap-ui-libs="sap.m,sap.zen.crosstab">	</script><link rel="stylesheet"	href="../../../../resources/sap/ui/thirdparty/qunit.css" type="text/css"	media="screen" /><script type="text/javascript"	src="../../../../resources/sap/ui/thirdparty/qunit.js"></script><script type="text/javascript" src="/aad/jasmine/qunit/qunit_xml_reporter.js"></script><script type="text/javascript"	src="../../../../resources/sap/ui/qunit/QUnitUtils.js"></script><script type="text/javascript" src="XmlTools.js"></script></head><body>	<h1 id="qunit-header">Crosstab Core Renderer Tests</h1>	<h2 id="qunit-banner"></h2>	<h2 id="qunit-userAgent"></h2>	<ol id="qunit-tests"></ol>	<div id="qunit-fixture">test markup, will be hidden</div>	<div id="uiCrosstabArea"></div>	<script type="text/javascript">		jQuery.sap.require("sap.zen.crosstab.rendering.DataModel");		module("Crosstab data model tests", {			setup : function() {				this.oDataModel = new sap.zen.crosstab.rendering.DataModel(null);			},			teardown : function() {				this.oDataModel = null;			}		});		test("Basic API", function() {			ok(this.oDataModel, "DataModel must exist");			ok(this.oDataModel.getCell, "getCell must not be null or undefined");			ok(this.oDataModel.insertCell, "insertCell must not be null or undefined");			ok(this.oDataModel.getRowCnt, "getRowCnt must not be null or undefined");			ok(this.oDataModel.getColCnt, "getColCnt must not be null or undefined");		});		test("Setting/getting cells", function() {			this.oDataModel.setRowCnt(20);			this.oDataModel.setColCnt(20);			//Simple cells			var oCell = this.oDataModel.getCell(0, 0);			ok(!oCell, "There should not be returned anything if no cell was set!");			oCell = null;			this.oDataModel.insertCell(new sap.zen.crosstab.DataCell(), 0, 0);			oCell = this.oDataModel.getCell(0, 0);			ok(oCell, "There should be a cell on 0/0 coordinates");			oCell = null;			//Various coordinates 			this.oDataModel.insertCell(new sap.zen.crosstab.DataCell(), 5, 7);			oCell = this.oDataModel.getCell(5, 7);			ok(oCell, "There should be a cell on 5/7 coordinates");			oCell = null; 			//Null cells			this.oDataModel.insertCell(null, 5, 9);			oCell = this.oDataModel.getCell(5, 9);			ok(!oCell, "The cell on coordinate 5/9 should be null");			oCell = null;		});		test("Setting/getting dimensions", function() {			this.oDataModel.setRowCnt(5);			this.oDataModel.setColCnt(5);			ok(this.oDataModel.getRowCnt() === 5, "Row Count should be 5");			ok(this.oDataModel.getColCnt() === 5, "Col Count should be 5");		});/* 		test("Setting cells out of bounds", function() {			this.oDataModel.setRowCnt(5);			this.oDataModel.setColCnt(5);			var that = this;			raises(function() {				that.oDataModel.insertCell(new sap.zen.crosstab.DataCell(), 6, 6);			}, "An exception should be thrown because the cell cannot be set out of bounds");		}); */		test("Clearing and probing of data in the model", function() {			this.oDataModel.setRowCnt(5);			this.oDataModel.setColCnt(5);			this.oDataModel.insertCell(new sap.zen.crosstab.DataCell(), 2, 3);			ok(this.oDataModel.hasData(), "The data model must have data");			this.oDataModel.clear();			ok(this.oDataModel.getRowCnt() === 0, "rowCnt must be 0 after clear()");			ok(this.oDataModel.getColCnt() === 0, "colCnt must be 0 after clear()");			ok(!this.oDataModel.hasData(), "Data model must not contain any data after clear()");		});		test("getCell functionality with colspan/rowspan", function() {			this.oDataModel = new sap.zen.crosstab.rendering.DataModel(null);			this.oDataModel.setRowCnt(3);			this.oDataModel.setColCnt(5);			var oCell = new sap.zen.crosstab.HeaderCell();			oCell.setRowSpan(3);			oCell.setColSpan(1);			this.oDataModel.insertCell(oCell, 0, 0);			var oCell2 = new sap.zen.crosstab.HeaderCell();			oCell2.setRowSpan(1);			oCell2.setColSpan(2);			this.oDataModel.insertCell(oCell2, 1, 2);			var oCell3 = new sap.zen.crosstab.HeaderCell();			oCell3.setRowSpan(1);			oCell3.setColSpan(2);			this.oDataModel.insertCell(oCell3, 2, 3);			var myCell = this.oDataModel.getCellWithRowSpan(2, 0);			ok(myCell === oCell, "Reading (2/0) must find cell in (0/0)");			myCell = this.oDataModel.getCellWithColSpan(1, 3);			ok(myCell === oCell2, "Reading (1/3) must find cell in (1/2)");			myCell = this.oDataModel.getCellWithRowSpan(2, 4);			ok(!myCell, "Reading (2/4) must not find any cell");			myCell = this.oDataModel.getCellWithRowSpan(1, 2);			ok(myCell === oCell2, "Reading (1/2) must find cell in (1/2)");			myCell = this.oDataModel.getCellWithColSpan(1, 2);			ok(myCell === oCell2, "Reading (1/2) must find cell in (1/2)");		});		test("get cells by col and row", function() {			this.oDataModel = new sap.zen.crosstab.rendering.DataModel(null);			this.oDataModel.setRowCnt(3);			this.oDataModel.setColCnt(5);			var oCell = new sap.zen.crosstab.HeaderCell();			oCell.setRowSpan(3);			oCell.setColSpan(1);			this.oDataModel.insertCell(oCell, 0, 0);			var oCell2 = new sap.zen.crosstab.HeaderCell();			oCell2.setRowSpan(1);			oCell2.setColSpan(2);			this.oDataModel.insertCell(oCell2, 1, 2);			var oCell3 = new sap.zen.crosstab.HeaderCell();			oCell3.setRowSpan(1);			oCell3.setColSpan(2);			this.oDataModel.insertCell(oCell3, 2, 3);			var oCell4 = new sap.zen.crosstab.HeaderCell();			oCell4.setRowSpan(1);			oCell4.setColSpan(1);			this.oDataModel.insertCell(oCell4, 2, 2);			var oCell5 = new sap.zen.crosstab.HeaderCell();			oCell5.setRowSpan(1);			oCell5.setColSpan(1);			this.oDataModel.insertCell(oCell5, 0, 2);						// tests			var aCells = this.oDataModel.getCellsByCol(0, 0, 3);			equals(aCells.length, 1, "1 cell should be found for getCellsByCol(0, 0, 3)");			ok(aCells[0] === oCell, "The right cell should be found for getCellsByCol(0, 0, 3)");			aCells = this.oDataModel.getCellsByCol(0, 1, 2);			equals(aCells.length, 0, "0 cells should be found for getCellsByCol(0, 1, 2)");			aCells = this.oDataModel.getCellsByCol(1, 0, 3);			equals(aCells.length, 0, "0 cells should be found for getCellsByCol(1, 0, 3)");			aCells = this.oDataModel.getCellsByCol(2, 0, 3);			equals(aCells.length, 3, "3 cells should be found for getCellsByCol(2, 0, 3)");			ok(aCells[0] === oCell5, "The right cell should be found for getCellsByCol(2, 0, 3)");			ok(aCells[1] === oCell2, "The right cell should be found for getCellsByCol(2, 0, 3)");			ok(aCells[2] === oCell4, "The right cell should be found for getCellsByCol(2, 0, 3)");			aCells = this.oDataModel.getCellsByCol(3, 0, 3);			equals(aCells.length, 2, "2 cells should be found for getCellsByCol(3, 0, 3)");			ok(aCells[0] === oCell2, "The right cell should be found for getCellsByCol(3, 0, 3)");			ok(aCells[1] === oCell3, "The right cell should be found for getCellsByCol(3, 0, 3)");			aCells = this.oDataModel.getCellsByCol(4, 0, 3);			equals(aCells.length, 1, "1 cells should be found for getCellsByCol(4, 0, 3)");			ok(aCells[0] === oCell3, "The right cell should be found for getCellsByCol(4, 0, 3)");						aCells = this.oDataModel.getCellsByRow(0, 0, 5);			equals(aCells.length, 2, "2 cells should be found for getCellsByRow(0, 0, 5)");			ok(aCells[0] === oCell, "The right cell should be found for getCellsByRow(0, 0, 5)");			ok(aCells[1] === oCell5, "The right cell should be found for getCellsByRow(0, 0, 5)");						aCells = this.oDataModel.getCellsByRow(1, 3, 2);			equals(aCells.length, 0, "0 cells should be found for getCellsByRow(1, 3, 2)");						aCells = this.oDataModel.getCellsByRow(2, 0, 5);			equals(aCells.length, 3, "3 cells should be found for getCellsByRow(2, 0, 5)");			ok(aCells[0] === oCell, "The right cell should be found for getCellsByRow(2, 0, 5)");			ok(aCells[1] === oCell4, "The right cell should be found for getCellsByRow(2, 0, 5)");			ok(aCells[2] === oCell3, "The right cell should be found for getCellsByRow(2, 0, 5)");					});	</script></body></html>